# **第14章 资料推荐**







## 存储基础（一）

原创 张芸，万林涛 [戴尔易安信技术支持](javascript:void(0);) *2016-08-06*

本文简要介绍了存储领域的若干重要术语，旨在帮助大家能更好地了解、学习存储这一领域。限于作者个人水平、精力有限，如有不当之处敬请多多包涵。





**1. DAS (Direct-attached Storage)**



直连式存储，顾名思义这是一种通过总线适配器直接将硬盘等存储介质连接到主机上的存储方式，在存储设备和主机之间没有任何网络设备的参与，此概念主要用于 区别NAS和SAN等网络存储。可以说DAS是最原始最基本的存储方式，在个人电脑、服务器上随处可见。常见的用于连接DAS和主机系统的协议/标准主要 有ATA、SATA、eSATA、SCSI、SAS和FibreChannel等。DAS的优势在于简单易用、读写效率高等；缺点在于容量有限、难于共 享，从而造成―信息孤岛‖（Islandsof Information）。





**2. RAID (Redundant Array of Independent/InexpensiveDisks)**



独立磁盘冗余阵列，是一种将多块独立的硬盘（物理硬盘）按不同的组合方式形成一个硬盘组（逻辑硬盘），从而提供比单块硬盘更大的存储容量、更高的可靠性和 更快的读写性能等。该概念最早由加州大学伯克利分校的几名教授于1987年提出。早期主要通过RAID控制器等硬件来实现RAID磁盘阵列，后来出现了基 于软件实现的RAID，比如mdadm等。按照磁盘阵列的不同组合方式，可以将RAID分为不同级别，包括RAID0到RAID6等7个基本级别，以及 RAID0+1和RAID10等扩展级别。不同RAID级别代表着不同的存储性能、数据安全性和存储成本等。下面我们将分别介绍这几种RAID级别。



**RAID 0**： 简单地说，RAID0主要通过将多块硬盘―串联‖起来，从而形成一个更大容量的逻辑硬盘。RAID0通过―条带化（striping）‖将数据分成不同的 数据块，并依次将这些数据块写到不同的硬盘上。因为数据分布在不同的硬盘上，所以数据吞吐量得到大大提升。但是，很容易看出RAID0没有任何数据冗余， 因此其可靠性不高。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4Zw9eRI5kK2veaIP7iaovu5NtH49vOUWJAv6PDyx5eC6HPTvWM6jHibtg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**RAID 1**：如果说RAID 0是RAID中一种只注重存储容量而没有任何容错的极端形式，那么RAID1则是有充分容错而不关心存储利用率的另一种极端表现。RAID1通过―镜像 （mirroring）‖，将每一份数据都同时写到多块硬盘（一般是两块）上去，从而实现了数据的完全备份。因此，RAID1 支持―“热替换”，在不断电的情况下对故障磁盘进行更换。一般情况下，RAID1 控制器在读取数据时支持负载平衡，允许数据从不同磁盘上同时读取，从而提高数据的读取速度；但是，RAID1在写数据的性能没有改善。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4LHtOWibHdzhwEudcWrjibicrFjarGc8qYyEXRDuxIqBwpxC3XaaEfLaFA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**RADI 2**：RAID 2以比特（bit）为单位，将数据―条带化（striping）‖分布存储在不同硬盘上；同时，将不同硬盘上同一位置的数据位用海明码进行编码，并将这些 编码数据保存在另外一些硬盘的相同位置上，从而实现错误检查和恢复。因为技术实施上的复杂性，商业环境中很少采用RAID2。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc43MDpMYibIsLB6l1w8icDz9Ezwl2h1JgSFKF9C9VfltS1v9ia6XFzenbrQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**RAID 3**：与RAID 2类似，不同的是：1）以字节（byte）为单位进行―条带化‖处理；2）以奇偶校验码取代海明码。RAID3的读写性能都还不错，而且存储利用率也相当高，可达到(n-1)/n。但是对于随即读写操作，奇偶盘会成为写操作的瓶颈。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4ibqEsBHYsHiaZ9Y7NXo5C4S1ibR4N0X92fNQVicANVow443B8WA1C1xAuw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**RAID 4**：与RAID 3的分布结构类似，不同的是RAID 4以数据块（block）为单位进行奇偶校验码的计算。另外，与RAID2和RAID3不同的是，RAID4中各个磁盘是独立操作的，并不要求各个磁盘的磁头同步转动。因此，RAID4允许多个I/O请求并行处理。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4n0JqMAonqfXPk4rd5QnY21qRqEqcjhcktDfWc3XqPzdNskR0YKO7bQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**RAID 5**: RAID 3和RAID 4都存在同一个问题，就是奇偶校验码放在同一个硬盘上，容易造成写操作的瓶颈。RAID5与RAID4基本相同，但是其将奇偶校验码分开存放到不同的硬盘上去，从而减少了写奇偶校验码带来瓶颈的可能性。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4UMxTp2UhblhfafKARck70dghIEPzRM2oWCibZWghGRWe0EBTlMWfI5w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**RAID 6**：在RAID 5的基础上，RAID 6又另外增加了一组奇偶校验码，从而获得更高的容错性，最多允许同时有两块硬盘出现故障。但是，新增加的奇偶校验计算同时也带来了写操作性能上的损耗。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4oR8atHxj8ia88Xgh5d6LJTxntKUlkoMIOx65QNxS5cL6N6uMDpBn80w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)





**RAID 0+1**: 为了获取更好的I/O吞吐率或者可靠性，将不同的RAID标准级别混合产生的组合方式叫做嵌套式RAID，或者混合RAID。RAID0+1是先将硬盘分 为若干组，每组以RAID0的方式组成―条带化‖的硬盘阵列，然后将这些组RAID0的硬盘阵列以RAID1的方式组成一个大的硬盘阵列。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4XWOAp49mYRbzWJdUkQDDFiaZ0FdeHAgO8FCv11XhELWDicXt5RZ5YEYg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**RAID 10**: 类似于RAID 0+1， RAID 10则是先―镜像‖（RAID 1）、后―条带化‖（RAID0）。RAID0+1和RAID10性能上并无太大区别，但是RAID10在可靠性上要好于RAID0+1。这是因为在 RAID10中，任何一块硬盘出现故障不会影响到整个磁盘阵列，即整个系统仍将以RAID10的方式运行；而RAID0+1中，一个硬盘出现故障则会导致 其所在的RAID0子阵列全部无法正常工作，从而影响到整个RAID0+1磁盘阵列 – 在只有两组RAID0子阵列的情况下，整个系统将完全降级为RAID0级别。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4SJyTSv6ibn0RIpKKyN0dMdfMZMAEblGViculQSutsibgy8RCgE8x59JGA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)





**3. JBOD （Just a Bunch Of Disks）**



JBOD是指在一个底板上安装的带有多个磁盘驱动器的存储设备，类似于RAID，但实质上又不同。因此中文多将其翻译为磁盘簇。JBOD通过SCSI电缆 或其他连接方式，将多块磁盘串联起来，组成一个大的逻辑磁盘 。因此，相比起一堆松散的磁盘，JBOD更容易管理。典型的JBOD磁盘系统可以容纳8个或者16个硬盘。连接在这个JBOD上的服务器将所有这些磁盘识 别成为一系列单独的磁盘。因此，一个16个硬盘合并的JBOD磁盘系统需要16个设备地址。在一些I/O技术，比如SCSI和光纤环路中，这会引发设备地 址不足等问题。



和RAID磁盘阵列不同，JBOD没有前段逻辑来管理磁盘上的数据分布，每个磁盘都是进行独立寻址。常见的情况是，JBOD上的数据简单地从第一块磁盘开 始存储，当第块磁盘存储空间用完后，在依次存储到其他磁盘上。另外，相比起智能磁盘系统，JBOD磁盘系统尤其不适合于支持RAID或者其他类型的虚拟 化。尽管如此，如果的确需要的话，这些都可以在JBOD磁盘系统的外部实现，比如使用服务器端的软件实现或者在存储网络中采用单独的虚拟化实体。相比较于 RAID磁盘阵列，JBOD缺乏数据安全保障和数据分布管理等功能，但是基于其低成本、大容量和易管理等特点，JBOD最近几年在业界还是得到了广泛的使 用。





**4. SCSI (Small Computer System Interface)**

**
**

小型计算机系统接口，是一种智能的通用接口标准，定义了一系列用于连接计算机和各种外部设备的命令、协议以及接口规范等，常见用于硬盘和磁带等设备。第一 个版本的SCSI标准于1986年由美国国家标准协会（ANSI）制定，至今已形成很多新的标准和扩展等，比如FastSCSI、UltraSCSI等。



SCSI initiator和target: 在一个SCSI会话（session）中，负责发起会话和发送SCSI命令的一端被称作initiator。而另一端主要负责接收、处理各种SCSI命 令，并负责数据的传输，被称作target。简单地讲，可以分别将initiator和target类比于C/S架构中的客户端（client）和服务端 （server）。一般情况下，用户计算机或服务器扮演initiator的角色，而存储设备承担了target的角色。



SCSI ID 和LUN: 依照不同版本的SCSI标准，一个SCSI总线最多可以连接8个或16个SCSI设备—实际情况中，在总线的末端一般要安装一个SCSI终结器 （terminator），所以最多可用的SCSI设备为7个或15个。每个连接在SCSI总线上的设备都一个唯一的ID号。鉴于一个SCSI总线上设备 数量的限制（最多8个或16个），一般SCSI存储设备都会由若干个子设备组成，比如RAID磁盘阵列、磁带库等。为了标识这些子设备，SCSI标准引入 了LUN的概念，即逻辑单元号（LogicalUnit Number）。所以，一个SCSI会话中，为了标识一个SCSItarget，需要同时指明SCSI控制器ID、SCSI ID和LUN。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4Ab6Bvdc2aYKoWSicLUDdyv4hlMHZ3VsngiceadLxjNZzqMC154Ta0RnQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



SCSI有多种接口形式，早期主要是并行的SCSI接口（如SPI）；在2008年，串行的SCSI接口SAS（Serial Attached SCSI）以其在数据吞吐率方面的潜力和优势取代了SPI。另外，还有SCSI和光纤信道结合产生的FCP协议（SCSI-over- FibreChannel Protocol）。而ISCSI则完全摒弃SCSI在接口上规范，将SCSI的命令和协议等其他部分移植到TCP/IP网络上来，通过普通的TCP /IP网络来传输SCSI的数据和命令等。





**5. SAN**

SAN的全称是Storage Area Network，是指一个提供统一的，块级别数据存取的专门网络。SAN主要用来制作存储设备，比如磁盘阵列，磁带库等，服务器可以读取这些设备，就好像这些设备是操作系统的一个逻辑上附加的设备。



一个典型的SAN有它自己存储设备的网络，这个网络通常不能被其他设备的本地局域网访问到。SAN只提供块级别的操作，而并不提供文件级别的操作。但是， 文件系统可以建立在SAN之上，以提供文件级别的读取，这种文件系统被称为SAN文件系统或者共享磁盘文件系统。



EMC的CLARiiON CX4系列，就是这样一种提供块级别数据存取的SAN存储。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4Yfc6GAp5U2b11094l13JmHuuduBFb7XunZyS9icpOGQfmRibJRAUBItA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



SAN通常和Fibre Channel（光纤通道）技术一同使用，表示采用光纤通道建立的一块存储区域网络，称为FCSAN。同时，SAN还可以和其他技术一起使用，比如iSCSISAN或者FCoESAN。



可以在多端口的存储系统上建立SCSI SAN，如下图所示。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4FNKzPibNuVwvSHHdZuuj0lRfD9IjUkW0acFTtLZAIQSBxB3rpibKibZ3w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**6. NAS**



NAS的全称是Network-attached storage，是指连接到计算机网络的文件级别计算机数据存储，可以为不同客户端提供数据存取。



NAS系统是包含一个或多个硬盘驱动器的网络设备，这些硬盘驱动器通常安排为逻辑的、冗余的存储容器或者RAID阵列。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4j3tSS8L5RTRddeSfBahpoNdibq0hmjFVJYw66hP7bRcy1sBskln08Lg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



NAS通常采用NFS、SMB/CIFS等网络文件共享协议提供文件存取。





**NFS**

Network File System（NFS）是一个最早在1984年由Sun公司提出的网络文件系统协议，它允许客户计算机上的用户按照类似于存取本地文件的方式来存取位于网 络上的文件。类似于其他很多协议，NFS建立在开放网络计算远程过程调用（OpenNetwork Computing Remote Procedure Call ，ONC RPC） 系统之上。NFS是一个按照RFCs定义的公开标准，允许任何人实现。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4BwPibdiaibdXLAQBtgup2Nm9L2clUs35EnxgSYyMrsGN2rNmq8NmtCz4w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**CIFS/SMB**

Common Internet File System（CIFS）又被认为是ServerMessage Block（SMB），是一个应用程序层的网络协议，这种协议允许主要用于提供对文件、打印机、串口和各种网络节点之间通信的共享存取。它还提供了一种认 证的过程内通信机制。微软使用CIFS在所有Windows上提供网络功能，Unix/Linux也通过SMB使用CIFS，Apple也有一些可以使用 CIFS的客户端和服务器。因此，它是一个允许各操作系统之间相互协作的协议。



**NAS vs DAS**

1. DAS是一个对于已有服务器的简单扩展，并且网络连接不是必需的；NAS设计为一个容易的并且自给自足的用于在网络上共享文件的解决方案。
2. 当都在网络上提供服务时，NAS比DAS的性能更好，因为NAS可以为文件服务做精确地调整。
3. 当NAS和本地（无网络连接的）DAS进行比较时，NAS的性能主要取决于网络的速度和拥塞程度。
4. NAS通常不会按照硬件（CPU、内存、存储）或者软件（扩展、plug-in、附加协议）进行额外的定制，而DAS通常会。
5. DAS和NAS都可以通过使用RAID或集群来扩展数据的可用性。
6. NAS和DAS都可以有不同数量的cache，可以大大的提升性能。



**NAS vs SAN**

1. NAS同时提供存储和文件系统；SAN只提供基于块的存储，而将文件系统留给客户端。

2. NAS采用的协议是NFS和CIFS/SMB；SAN采用的协议是SCSI、Fibre Channel、 iSCSI、ATAover Ethernet（AoE）或者HyperSCSI。

3. 对于Client OS来说，NAS显示为一个文件服务器，客户端可以将网络驱动器映射为该服务器上的共享；而SAN对ClientOS仍然显示为一个磁盘，该磁盘与客户端的其他本地磁盘一样在磁盘管理工具中可见，并且可以随着文件系统格式化和挂载。

   ![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4mN84mAdqMEaRHgw4U7QCmsUfZYyOfFepliaSSRNJUkPVaPtgrHnk4IA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

   

4. 但是，NAS和SAN并不是相互排斥的，可以连接起来作为SAN-NAS混合体，从同一个系统中同时提供基于文件的协议（NAS）和基于块的协议 （SAN）。如下图所示，EMC的Unified Storage产品VNX/VNXe就可以同时提供NAS和SAN的访问方式。

   

5. 



**注：** 本文所引有图片多来自wikipedia和《Storage Networks Explained》第二版





**关于作者**

张芸，EMC中国研究院云平台及应用实验室高级研究员，毕业于西安交通大学，主要关注云计算、存储虚拟化等领域。



万林涛，EMC中国研究院云基础架构实验室高级研究员，毕业于南京大学，主要关注于云计算、虚拟化、分布式计算等领域。















## 存储基础（二）

原创 张芸，万林涛 [戴尔易安信技术支持](javascript:void(0);) *2016-08-07*

[存储基础（一）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771297&idx=1&sn=11cf0ceee941a9d4faba1cb6b7af4e2b&scene=21#wechat_redirect)





**7. FC (Fibre Channel) & FCoE**



光纤信道，是一种用光纤作为媒质的光传输通道，是一种高速网络技术标准。 在初期，FC主要是为高速局域网设计的，现在多用于SAN等存储网络中。光纤信道具有长距离、高速率、低延迟和低错误率等特点。在FC标准中，制定了三种标准的拓扑结构：点到点（Point-to-Point）、已裁定环路（ArbitratedLoop）和Fabric。在一个Fabric拓扑中，一般需要一个或多个光纤交换机将设备连接起来（见下图）。FC协议栈分为五层，从FC-0到FC-3最底层的四层规定了基础通讯技术规范，包括物理接口、传输格式和寻址等；最上层的FC-4则定义了如何将上层用户协议（UpperLayer Protocols, ULPs）映射到底层的光纤网络中。由于以太网的快速发展（千兆网和万兆网的出现和普及）以及存储网络、传输网络的不断融合，现在又出现了以太网光纤通道FCoE（FibreChannel over Ethernet）。FCoE将底层关于传输的协议层FC-0和FC-1完全用以太网协议取代，上面的几个协议层依然不变。FCoE的好处是不需要特殊的FC接口，从而减少了服务器上的网络接口数量，简化了管理配置和降低了功耗等。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4BvJsGKcvqXwphdam94H6Qufn2aPeePLuDfrE0G9Crp5NJqmxA25Hsg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**8. Object-based storage device (OSD)**



Object-based Storage Device (OSD) 即基于对象的存储设备，是一种计算机存储设备。它类似于磁盘存储但是工作在更高的层次上。不像一般的存储设备那样提供基于块的接口来存取固定大小的数据块，OSD将数据组织起来存放在可变大小的数据容器中，这个容器称为对象（objects）。每一个对象包括有数据（一段未解释序列的字节）和元数据（一组可变长的描述对象的属性）。OSD的命令接口包括创建和删除数据、向个别对象写入字节、从个别对象读取字节、设置和读取对象的属性。OSD承担管理存放对象和它们的元数据的存储的责任。同时OSD实现了一套安全机制来提供对于每一个对象和每一条命令的访问控制。



EMC的Atmos就是OSD的一个典型例子。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4FMu8gbBg1rGWnicuNkDgjXriclfSrzvUDMPVIV0hOB8ROjbYAZuQN5SA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)





**9. CAS (Content Addressed Storage)**



内容寻址存储是由EMC于2002年4月份率先提出的针对固定内容（FixedContent）存储需求的网络存储技术—因此，CAS有时候也被称为固定内容存储(FCS, Fixed Content Storage) 。所谓固定内容，是指那些一旦生成就很少或从不再改变的数据，具有一次写入、多次读取（WORM– Write Once Read Many）的特点。典型的数据主要包括法律条文、标准和规范的电子文档、数字化医学信息、电子邮件及附件和卫星图像等。在CAS中，数据的存取是基于其内容寻址，而不是通过传统存储中所谓的路径和文件名。当存放数据时，首先计算其哈希值作为其数字指纹，然后根据该数字指纹来决定数据存放位置。因此CAS具有数据一经写入便无法修改的特点，从而可以满足法律对于某些企业特殊数据存储的规定和要求（比如，美国2002年通过的著名的萨班斯法案—从年份上不难看出这部法案和CAS的关系）。另外，CAS具有丰富的标签信息，还可以对数据的进行版本追踪，因此具有良好的可搜索性。EMC于2002年发布的Centera系列产品是典型的CAS存储系统。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4tzbnsbiaUjpP3kd1aMDNMUtJP5x6sYXHiaZPj87XrcfNJob124nxwSTQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)





**10. Document Management System（DMS）**



Document Management System（DMS）是文档管理系统，为应用程序提供服务。它采用多种方式处理和管理信息和数据。比如，它可以确保信息按照需求进行分类使用和存储。DMS也可以从不同的应用程序链接数据和信息，从而映射到完整的企业流程。比如，它可以将从EnterpriseResource Planning系统（ERP系统）收集来的数据和从关系数据库之上的文件系统收集来的数据进行结合。DMS还可以对数据进行索引并且存放由此得到的元数据到自己的数据库中。一个索引的例子是完整文本索引，它可以大大简化之后基于内容的信息搜索。DMS通常具有适用于搜索归档数据的应用程序。



据调查公司的数据显示，企业内部数据有80％是非结构化的内容，无法被数据库软件收录，这些文件绝大部分以文档、图片、报表、视频等类型存在，现代的数据存储技术能够真正让这些内容变为可用的信息。



EMC的Documentum产品就是这样一个DMS系统，可以提供以下功能：

- 用完善的访问控制机制实现安全的内容共享
- 提供一个安全而又对用户友好的工作环境
- 在不影响生产效率的情况下确保幕后的保留期要求
- 为快速、彻底的响应法律调查提供方便
- 优化存储资源，同时满足SLA要求和降低成本





**11. Backup & Archiving**



数据备份和存档是数据存储领域的两大应用。备份是将业务数据复制、保存到其他存储介质上，以保障业务系统出现数据丢失时可以迅速进行数据恢复。存档则主要关注长时间地有效保存某些特殊的或者重要的数据。两者在很多方面都有相似的地方，因此很容易混淆。下面的表格简单地比较了两者的不同。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4p2YsxmqXViadMQbLhxnu0Obes6jAo46WPYbYtEpoFucQtqCefM1iaM3w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**12. Storage Virtualization**

**
**

存储网络中的存储虚拟化是为了简化大量数据的管理工作。存储虚拟化的最基本的概念是将存储的虚拟化功能从服务器和磁盘系统转移到存储网络。这样可以产生一个新的虚拟化实体，这个虚拟化实体在存储网络中的定位可以跨越所有的服务器和存储系统。这种存储网络中的新虚拟化可以使得存储网络被完全有效利用，还可以提高性能以及避免故障。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4u7yCiaibWK6ZAws8foLWgK8EMyyCq0q3ykib9oe9a6qAicSd6zhxVZoiblQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)





**13. HSM (Hierarchical Storage Management)**



分级存储管理，是一种实现数据在高成本、高性能的小容量存储介质和低成本、低性能的大容量存储介质间自动适时迁移的存储技术。比如，有些经常被访问的数据就需要放到性能较好的存储介质上，比如SSD等flash存储；而大量不常被访问的数据则需要被保存到硬盘，甚至磁带库中。HSM技术很好地解决了存储成本和存储性能之间的平衡问题。EMC产品中主要的HSM实现包括DiskXtender和FAST（FullyAutomated Storage Tiering）等。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4HwwbrbNLHANopjov6qibGUFWwcAtiakByTXxf7hM6FgBIyH9qkmLpkVw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**14. Deduplication**



数据deduplication是一种减少冗余数据的特殊数据压缩技术，该技术可以有效地提高存储的使用率。在deduplication的处理过程中，通过一个分析的过程，独一无二的数据块被识别并保存，其他的数据块经过分析，都将跟这个数据块进行比较，相同的数据块会采用一个指向已存在数据块的引用来代替。这样可以大大减少存储数据的数量。在这个分析的过程中，可能使用加密哈希（比如MD5或者SHA）来鉴别两个数据块是否相同。该deduplication过程必须为以存储的数据维护一个身份特性（比如加密哈希）的列表，同样该过程必须维护一个相同数据块的引用的列表。



根据deduplication的时间不同，可以将deduplication分为两种：in-line和post-process：

- Post-process deduplication：在这种deduplication中，新来的数据首先保存在一个存储设备中，然后处理过程分析该数据并查找是否存在重复的数据。这种方式的优点是在存储数据之前不需要等待哈希计算和查找完成，这样可以保证数据存储的性能不会降低。实现提供基于策略的操作可以使用户推迟活跃文件的优化，或者根据类型和地址来处理文件。一个潜在的缺点是这个方法会在短时间内在存储系统中存储大量不需要的重复数据，可能引发存储系统满负荷。
- In-line deduplication：在这种处理方法中，当数据进入到目标设备的同时，就会实时的在该目标设备上进行deduplication的哈希计算。如果该设备识别出某数据块已经在存储系统中保存，那么它就不会保存这个新的数据块，而只是引用已有的数据块。跟post-processdeduplication相比，in-linededuplication的好处是它需要的存储空间少，因为存入存储系统的数据是没有重复的。但是它的缺点是它需要频繁的运行，因为哈希计算和查找会耗费较长时间，可以说数据存储会变慢从而会降低设备的备份吞吐量。尽管如此，一些采用in-linededuplication的供应商可以证明他们的产品与post-processdeduplication竞争者具有类似的性能。



根据deduplication分割数据的方法，又可以将deduplication分为两种：固定长度片段和可变长度片段：

- 固定长度片段（又称为块）：这种方法的主要限制在于当数据在文件中有迁移时，比如对一个PowerPoint文档增加一页幻灯片之后，该文件中处于该位置之后的所有块都需要重写，并且有可能被当做与原文件中不相同的块而进行处理，这样压缩效率就会受到影响。这方面采用更小块的数据块切分会比大的带来的影响小，但是它会为计算重复数据带来更多的处理过程。
- 可变长度片段：一个更加先进的方法是基于内部的数据格式采用可变长度的片段，它可以解决固定长度片段中可能发生的数据迁移问题。



EMC的DataDomain产品，就是一种提供了deduplication功能的备份产品。它采用一种独特的in-linededuplication和可变长度片段技术，可以达到高达8倍的存储比率。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4QzWTlxSVwBFphq09uBOeYwCPz1pAx5nTvctsKZzdgEB04IFdREYiasA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)





**15. Cloud Storage**



云存储，是一种新型的网络在线存储。云存储的运营方为用户提供巨大的存储资源池，为用户提供数据存储服务；而用户只需要按需购买一定的存储容量和服务级别，便可以将数据存储到云存储的虚拟存储池中。所谓虚拟存储池，第一、用户并不需要关心数据的存放位置，利用云存储提供的接口或客户端可以随时存取数据；第二、用户不需要关系底层的存储设备和网络拓扑，省去了大量的配置、管理工作；第三、存储容量可以随需变化，用户也只需要按需付费，具有很好的弹性，可以很好地适应企业业务发展。典型的云存储系统包括Amazon的S3、Google的Blobstore和EMC的Atmos。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4EllJzNIRiaiaSGsssJz2hFRp2D2OjUpDgSLiaNfbBRkianKJ0maKG55Tsw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**16. SNIA (Storage Networking Industry Association)**



网络存储工业协会，是由全球300多家存储企业于1997年12月份联合倡议成立的，其主要目的是为了推进全球存储行业的技术发展和规范制定。为了解决存储行业内长期缺乏统一、规范的技术术语来描述存储产品体系架构，SNIA于2001年提出了共享存储模型（SharedStorage Model）的概念，希望该模型能像网络架构中OSI的七层模型在存储行业内发挥规范、引导的作用。下图展示了SNIA共享存储模型中几大重要的组件。随着SNIA的发展，其在存储行业内发挥的作用也越来越重要。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIV62ic4tL7ZUzkCFibyt4QSc4WV5XdcH73swoJFzBo8QINWG2ibeyicN4AiaRyFib4kibbprSRMQCiajCMY1g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



**关于作者**



张芸，EMC中国研究院云平台及应用实验室高级研究员，毕业于西安交通大学，主要关注云计算、存储虚拟化等领域。



万林涛，EMC中国研究院云基础架构实验室高级研究员，毕业于南京大学，主要关注于云计算、虚拟化、分布式计算等领域。



















## Wireshark中文教程 - 一站式学习Wireshark

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-09-04*

**Wireshark中文教程 - 一站式学习Wireshark 倾情奉献！**



[一站式学习Wireshark（一）Wireshark基本用法](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771343&idx=1&sn=ae7dd78bc6b0f59b597aa117d3a4f72e&scene=21#wechat_redirect)

[一站式学习Wireshark（二）应用Wireshark观察基本网络协议](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771344&idx=1&sn=737889ff0180e0195315ad4574849ca6&scene=21#wechat_redirect)

[一站式学习Wireshark（三）应用Wireshark IO Graphs分析数据流](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771353&idx=2&sn=9efd16745711d250f8a2f58a4b1a5fd8&scene=21#wechat_redirect)

[一站式学习Wireshark（四）：网络性能排查之TCP重传与重复ACK](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771358&idx=2&sn=9d2475bf10f35bf6b251de24857d9100&scene=21#wechat_redirect)

[一站式学习Wireshark（五）：TCP窗口与拥塞处理](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771363&idx=3&sn=5d3ea6a6e880148a5f3fcbe134219a53&scene=21#wechat_redirect)

[一站式学习Wireshark（六）：狙击网络高延时点](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771368&idx=1&sn=41992d4e628b195ea0eb7ae078d1ae0f&scene=21#wechat_redirect)

[一站式学习Wireshark（七）：Statistics统计工具功能详解与应用](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771374&idx=1&sn=e7b186c79d3d52f0b67491c0625501e9&scene=21#wechat_redirect)

[一站式学习Wireshark（八）：应用Wireshark过滤条件抓取特定数据流](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771381&idx=3&sn=90ee3154d64443f9e969a8108814d6e0&scene=21#wechat_redirect)

[一站式学习Wireshark（九）：应用Wireshark显示过滤器分析特定数据流（上）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771398&idx=3&sn=6b5fcd482222a73f1f025f732ea288e5&scene=21#wechat_redirect)

一站式学习Wireshark（十）：应用Wireshark显示过滤器分析特定数据流（下）













## 【网络基本功】细说网络那些事儿

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-07-09*

**常言道：欲练神功，必先练好基本功！**



本系列文章着重于讲解网络管理实际应用中常常涉及的重要知识点，尽量以实用为主。



1. [网络传输](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401000571&idx=2&sn=06a95344cf6b97a6ed7e9f67a54c889f&scene=21#wechat_redirect)
2. [交换机](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401045484&idx=2&sn=07669e31f16d3da152519f1e7422f561&scene=21#wechat_redirect)
3. [VLAN与Trunk](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401241549&idx=2&sn=8e7301548e490ba79bfe2e5749da9888&scene=21#wechat_redirect)
4. [路由(上)](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401269825&idx=2&sn=7abd08dff39ec6ce3560a4498e6efe52&scene=21#wechat_redirect)
5. [路由(下)](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401333937&idx=2&sn=9884e460a0aa6e45dbd29a8bdc42b96b&scene=21#wechat_redirect)
6. [链路聚合](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401369432&idx=2&sn=afc49aaaf5d74570ce299d6b6d653abc&scene=21#wechat_redirect)
7. [IP地址与子网](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401381110&idx=2&sn=5b3de15116ea0e66300d93d24630119f&scene=21#wechat_redirect)
8. [TCP滑动窗口](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401404857&idx=2&sn=ea4c18abcbdbd9ed174722db416c1df9&scene=21#wechat_redirect)
9. [TCP重传](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401448207&idx=2&sn=11be910ea7f511a32430494a0e89ca18&scene=21#wechat_redirect)
10. [TCP确认机制](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401458871&idx=2&sn=6d7be947cba66eb57f63bbe41aa93128&scene=21#wechat_redirect)
11. [TCP窗口调整与流控](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401497332&idx=2&sn=31f2daffa027fd9c47e4cf1013556333&scene=21#wechat_redirect)
12. [细说Linux网络配置（上）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401584951&idx=2&sn=a8486f549623b87da9955917768f5460&scene=21#wechat_redirect)
13. [细说Linux网络配置（下）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401600572&idx=3&sn=3010638cf314535e37ad0b42d3971bf0&scene=21#wechat_redirect)
14. [常用诊断工具：ping](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401619929&idx=3&sn=fa5c1ec57059bcf6b0a2ebf3791cd1ff&scene=21#wechat_redirect)
15. [网络性能监测与实例（上）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401630349&idx=2&sn=37a8b3199fb808435e8cf11ba0cc1637&scene=21#wechat_redirect)
16. [网络性能监测与实例（下）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401644344&idx=2&sn=9d698bdc0df745eeb37cc98b9b779c10&scene=21#wechat_redirect)
17. [tcpdump的妙用（上）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401670977&idx=3&sn=48a0270403d54f53a03717bbb63f8f9e&scene=21#wechat_redirect)
18. [tcpdump的妙用（下）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401679382&idx=3&sn=fc5240723e2f51f7e7168707638865da&scene=21#wechat_redirect)
19. [NAT原理与配置](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401688439&idx=3&sn=2f3ccc34d02f17810c828be09204d722&scene=21#wechat_redirect)
20. [ICMP与ARP](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401696179&idx=3&sn=8324a9d289ba1d8a91fbee3440fdef11&scene=21#wechat_redirect)
21. [HTTP（上）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401706187&idx=3&sn=9610bfad21bcd681f83dfc84e50db932&scene=21#wechat_redirect)
22. [HTTP（下）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401739131&idx=3&sn=b3f5cee5eea77fe6b32e52667570480d&scene=21#wechat_redirect)
23. [Wireshark抓包实例诊断TCP连接问题](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401757248&idx=2&sn=a4b1bc7238251c0e552c15e38e58994e&scene=21#wechat_redirect)
24. [Wireshark抓包实例诊断TCP重传](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401772214&idx=3&sn=66251b47846904aada837705a89dc595&scene=21#wechat_redirect)
25. [Wireshark抓包实例诊断TCP重复ACK与乱序](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401787878&idx=3&sn=4172f7110fb75a73dd14535afbba3945&scene=21#wechat_redirect)
26. [Wireshark抓包实例诊断TCP窗口与reset](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401823012&idx=2&sn=6b391e2c66924b1ad7a26a7670b56f58&scene=21#wechat_redirect)
27. [Wireshark抓包实例诊断HTTP问题（上）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401832355&idx=3&sn=287a5720a64d0093abb63298b215d651&scene=21#wechat_redirect)
28. [Wireshark抓包实例诊断HTTP问题（下）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401847640&idx=3&sn=bf6bd2057e4df774488ace680e7a76a7&scene=21#wechat_redirect)
29. [Wireshark抓包实例诊断数据库问题](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401858638&idx=3&sn=91fc31649616ae8b411d81840628c4e3&scene=21#wechat_redirect)
30. [DNS](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=401869837&idx=2&sn=4d0975d912d053d826d206fd7bd4b512&scene=21#wechat_redirect)









## Iometer学习笔记一：初识Iometer

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-10-02*

   Iometer是一款用于单系统和集群系统的I/O子系统度量（measurement）和特征化（characterization）工具，它是一个负载生成器（workload generator），也是一个度量工具（measurement tool），可用于模拟任何程序或benchmark的磁盘或网络I/O操作，在单个或多个（联网）系统上生成并度量负载。

 

**Iometer简介**

 

   Iometer由两个程序组成，Iometer和Dynamo。Iomter是控制程序/GUI，它告诉Dynamo需要做什么，收集数据结果并总结到一个输出文件。一次只应该运行一个Iometer，通常运行在服务器上。Dynamo是一个负载生成器，它没有GUI，在Iometer的命令下执行I/O操作并记录性能信息，然后返回数据给Iometer。一次可以运行多个Dynamo，通常是一个副本运行在服务器上，另一个副本运行在每一台客户端上。Dynamo是多线程的，每一个副本可以模拟多个客户端程序的工作（workload），每一个正在运行的Dynamo副本被称为是一个Manager，Dynamo中的每一个线程被称为worker。



   双击Iometer.exe运行Iometer，出现Iometer GUI（如下图所示），同时会在本地系统上启动Dynamo的一个副本。双击一个.icf设置文件、将icf或.txt文件拖拽到Iometer.exe也能启动Iometer，并且加载配置信息。命令行启动方式形如：c:\iometer myconfig.icf。如果需要在其他机器上启动Dynamo，将机器名作为Iometer的命令行参数，例如c:\dynamo IOServer。



![图片](http://mmbiz.qpic.cn/mmbiz_png/TztEwAzAQIUonP2nm2oCubtD8B9Y3Sjc8SLanwHkdvE2A6X5VgRCd9brJAibMVZj9kh0Y7BJY7ZYEGjn76YI4cA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   如果Iometer和Dynamo在单个系统上运行，那么是不需要网络支持的，否则就需要配置TCP/IP网络。不需要在任何一台机器上启动多于一个的Dynamo的副本，要增加worker的数量，使用Iometer启动其他worker线程即可。



   蓝色图标的Targets代表物理驱动器（图中并没有物理驱动器），只有当物理驱动器上没有任何逻辑分区时才会被显示出来。黄色图标代表逻辑（已挂载，mounted）驱动器，只有当它们为可写（writable）时会被显示出来。黄色图标带有红色斜杠代表该驱动器在测试开始之前，需要先做准备（prepare）。单击选中一个或多个（shift）磁盘来做测试，被选中的磁盘将自动分发给Manager的worker。



   对逻辑驱动器的访问是通过对文件\iobw.tst的写入来完成的，如果该文件不存在，驱动器图标上会有一条红色斜杠，在测试开始之前，该文件会被创建并占满整个磁盘空间。

 

**
**

**快速开始测试磁盘性能**

 

1. 双击Iometer.exe，Iometer主窗口出现并自动运行一个Dynamo负载生成器
2. 在Iometer窗口的左侧的拓扑面板点击一个Manager，你会在Disk Targets tab中看到可用的磁盘驱动器。
3. 在Disk Targets tab中，选择一个或多个磁盘
4. 切换到Access Specifications tab，在Global Access Specifications列表中双击“Default“，出现”Edit Access Specification“对话框。
5. Edit Access Specification对话框告诉你磁盘将如何被访问，默认是2KB随机I/O，67%读+33%写，代表典型的数据库负载。你可以就使用默认设置或对其进行更改。点击OK关闭对话框。
6. 为了获得最大吞吐量（MB/s），尝试更改Transfer Request Size = 64KB，Percent Read/Write Distribution = 100% Read，Percent Random/Sequential Distribution = 100% Sequential.
7. 为了获得最大的I/O速率（IOPS），尝试更改Transfer Request Size = 512Bytes，Percent Read/Write Distribution = 100% Read，Percent Random/Sequential Distribution = 100% Sequential。
8. 切换到Results Display tab，设置Update Frequency = 10秒。
9. 点击Start Tests按钮（绿色旗帜），一个标准的文件保存对话框出现，选择一个文件用以保存测试结果（默认是result.csv）
10. 10秒钟之后，第一个测试结果显示在Results Display tab并每隔10秒更新一次。点击每个bar左侧的chart可以选择你想要的显示结果，你也可以将一个worker或manager拖拽到一个bar chart上来查看某一个worker或manager的结果。
11. 点击Stop Test按钮（Stop标志），测试将停止，结果会被保存在results.csv文件中，这是一个逗号分隔的文本文件，可以用任何文本编辑器查看或导入电子表格。





**测试两台计算机之间的网络性能（A和B）**

 

1. 在computer-a上，双击Iometer.exe
2. 在computer-b上，打开一个cmd并执行C:\dynamo computer-a
3. 在computer-a上，你将看到computer-b作为一个新的manager出现在Topology面板，点击它可以观察到其磁盘驱动器将出现在Disk Targets tab
4. 选中computer-b，点击Start Network Worker按钮（网线图示）早computer-b上创建一个网络服务器。
5. 切换到Network Targets tab，从列表中选择computer-a的一个接口，这将在computer-a上创建一个客户端并将客户端和服务器连接在一起。
6. 切换到Access Specifications tab，在Global Access Specifications列表中双击“Default“，出现”Edit Access Specification“对话框，指定Transfer Request Size = 512Bytes，点击OK。
7. 切换到Results Display tab，设置Update Frequency = 10秒。
8. 点击Start Tests按钮（绿色旗帜）并选择一个文件用于保存结果。如果指定一个现有的文件，新的结果会被附加在已有结果后面。
9. 观察结果后，点击Stop Test按钮停止测试并将结果保存到文件。













## Iometer学习笔记二：详解“Disk Target Tab”

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-10-03*

   上一次我们简单介绍了Iometer的组成部分以及如何快速使用Iometer做性能测试，这次我们将详细介绍Iometer图形界面中的“磁盘目标选项卡”。

 



**拓扑面板的“Disk Target tab”**

 

   拓扑面板显示当前活动Manager（Dynamos）和Worker（线程）的一个层级列表。点击一个worker、manager、或All Manager可以在Disk Targets，Network Targets和Access Specification tab中查看并修改其设置。默认，manager的名称和其所在机器的名字是一样的，Worker的名字是“Worker n”，可以通过单击选中的manager或worker来修改名字。”All Manager”的名字是不可更改的。



![图片](http://mmbiz.qpic.cn/mmbiz_png/TztEwAzAQIUonP2nm2oCubtD8B9Y3SjcBSQv1LVDCW9yu3fMblHWIib4H5Q2v0Ma1ibvGG17LFXaCaNtSopzFnrQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   点击某个worker，被选中的targets（磁盘或网络接口）将由该worker使用，其他的设置显示了当前该worker的设置，任何更改仅针对该worker。



   点击某个manager，被选中的targets将以轮询的方式分发给该manager下的所有worker。Disk Targets，Network Targets和Access Specification tab显示了该manager下所有worker的公共设置。如果所有worker的设置参数都相等，那么设置项会显示某一个值，否则将是空白的（说明该manager下的worker对该参数的设置不同），任何参数的更改会被应用到该manager下的所有worker。



   点击All Manager不会显示任何target，因为manager的target列表可能是不同的。其他设置显示了所有worker的公共参数，任何更改都会被应用到所有worker。



   Disk Targets tab允许查看并控制当前选中的worker所使用的磁盘。单击或shift-单击选择任意数量的驱动器供已选worker在测试时使用。Physical驱动器以蓝色图标显示，名称是“PHYSICALDRIVEn”（仅当它们不包含任何信息，除了空闲空间）。Worker直接读写raw disk来访问物理驱动器，而非使用iobw.tst文件。推荐用Physical驱动器进行测试。



   Worker通过读写\iobw.tst文件来访问逻辑驱动器，如果该文件不存在，驱动器的图标会有一条红色的斜线。在测试开始的时候，系统会被创建该文件并扩容直至磁盘空间撑满（该过程会在状态栏显示“Preparing Drives”）。当然，可以通过设置Maximum Disk Size来设置该文件的大小，从而控制Iometer使用的磁盘空间。如果该文件存在但是不可写，那么该驱动器被认为是只读的，而且根本不会被显示出来。



   **Maximum Disk Size** – 表示已选worker所允许测试的sector数量。默认值是0，代表整个磁盘或\iobw.tst文件。如果指定一个非零值，Iometer使用指定数量的512-Bytes的扇区，（从Starting Disk Sector开始）。如果指定的值超过了磁盘或文件的范围，该值会被忽略并使用默认值0。举个例子：Starting Disk Sector = 5，Maximum Disk Size = 10，被选中的worker会使用磁盘或文件\iobw.tst的sector 5-14。



   Iometer使用Maximum Disk Size + Starting Disk Sector的加法和来控制iobw.tst文件的上限大小并以此大小来创建文件。如果该文件已经存在了，更改该值并不能resize iobw.tst。如果两个worker被分配给同一个unprepared逻辑驱动器，那么第一个worker的Maximum Disk Size + Starting Disk Sector的加法和会生效。

 

   **Starting Disk Sector** - 起始磁盘扇区（0=物理磁盘或iobw.tst文件的开始），指定lowest-numbered disk sector，默认是0，即磁盘或iobw.tst文件的首个512-byte扇区。

 

  **# of Outstanding I/Os per target** – 被选中worker的每个磁盘一次所允许的未处理的异步I/O的数量。（注意：如果操作完成的非常快，磁盘实际看到的队列深度可能更少，默认值是1）举个例子：假设选中了一个Manager，选中8个Disk，指定# of Outstanding I/O of =16，磁盘被分布到咯咯worker（每个worker分到2个disk），每个worker对其下的每一个disk生成最大16个未处理I/O，那么整个系统中该Manager每次将生成最多128个未处理I/O（4 worker * 2disk/worker * 16未处理I/O/disk）。



注意：如果系统中未处理I/O的数量非常大，Iometer或Windows会hang、thrash或crash。这里所谓的”非常大“究竟是多少取决于磁盘驱动程序和可用的内存数量。这个问题是由于Windows和某些磁盘驱动程序的限制，并不是Iometer的问题。Iometer允许你设置未处理I/O的数量，而其他应用程序未必，所以其他应用程序对此问题并不常见。

 

   **Test Connection Rate**：控制worker多久打开和关闭磁盘一次。默认是Off，表示所有磁盘在测试开始的时候就是打开的，并在测试结束后被关闭。如果Test Connection Rate是打开的，worker会在测试开始的时候打开其所有的磁盘，当指定数量的事务在某个磁盘上执行完毕后，该磁盘就会被关闭，并在下一个I/O达到磁盘之前被重新打开（re-open），事务数量可以是0，意味着worker仅仅重复打开及关闭磁盘。事务是指一个I/O请求及其响应，是否有响应取决于Edit Access Specification对话框中的“Reply Size”设定。每个“打开+事务+关闭”的序列被称为一个连接（Connection），系统会为每个连接记录从打开到关闭所用的时间，系统会报告最大连接时间、平均连接时间以及每秒平均连接数。















## Iometer学习笔记之三：详解“Access Specifications Tab”

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-10-04*

   Access Specifications tab允许用户控制每一个worker对其选中的target所执行的I/O类型。该Tab下主要包括Global Access Specification和Assigned Access Specifications列表以及一些按钮，我们将详细介绍它们的意义和使用方法。



 

**Global Access Specifications和Assigned Access Specifications列表**



![图片](http://mmbiz.qpic.cn/mmbiz_png/TztEwAzAQIUonP2nm2oCubtD8B9Y3SjcG2qq7kNpTkInOVD9mYOBicVXnIF5aN5DX0yUuDqXaaetdjtOYXdLJicw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   Global Access Specifications列表列出了当前定义的所有访问规则（Access Specification），一个访问规则可以指定一种类型的I/O或多种类型的混合I/O。Assigned Access Specifications列表显示了当前指派给选中的worker的访问规则，可以通过选中一个或多个访问规则并点击Add按钮将其指派给worker。每个访问规则由名称和图标组成，名称由用户定义，最好是能清楚的描述该访问规则的形态。图标指定了访问规则的Default Assignment，它决定了创建一个worker后会自动分配哪一个访问规则给它。一共有4种Default Assignment：All Workers、Disk Workers、Network Workers以及None。



   在Assigned Access Specifications列表中，每一个访问规则左侧的LED（带有颜色的圆圈）表示在测试时该访问规则所处的状态：



-    蓝色：访问规则尚未运行
-    绿色：正在运行的访问规则
-    红色：运行完毕的访问规则



   如果Assigned Access Specifications列表中有多个访问规则，Iometer会执行一个系列测试（series of tests），访问规则将从上至下顺序执行，执行每一个访问规则期间，Iometer运行一个或多个测试（由Test Setup tab的设置决定），如果Test Setup tab没有指定运行时间，每个测试会一直运行直到你按了工具栏上的Stop按钮为止。



   可以分配不同的访问规则给不同的worker，例如，让磁盘worker执行类似数据库的I/O，同时让网络worker执行类似web-server的I/O（分别用不同的访问规则定义）。如果列表中存在多个访问规则，所有worker会同时执行它们的首个访问规则，然后执行第二个，等等。如果每一个worker的访问规则数量不同，拥有少量访问规则的worker在其他拥有较多访问规则的worker依然在工作的时候将处于空闲状态。你可以分配一个空闲访问规则来强制让一个worker在其他worker正在工作的时候处于空闲状态。



   单个访问规则可以多次指派给同一个worker。例如，如果有两个worker（1和2）以及两个访问规则（A和B），可以把访问规则A和B指派给worker1，为worker2指派访问规则A的两个副本。这种情况下将运行两个测试：在一个测试中，两个worker都将运行访问规则A，在第二个测试中，worker1运行访问规则B，同时worker2再次运行访问规则A。



   如果在Topology面板选中了一个manager或“All Managers”， Assigned Access Specifications列表将是空的，除非该manager或“All Managers”的worker都采用相同的访问规则列表。在选中了某个manager或“All Managers”的情况下对此列表进行更改，那么这种更改会被指派给该manager或“All Managers”下的所有worker。



   点击New将弹出Edit Access Specification对话框，用于创建一个新的访问规则，它显示了访问规则的定义并且允许对其进行修改。每个访问规则可以由多个I/O形态组成，每个I/O形态由Size、%Access、%Read、%Random、Delay、Burst、Alignment、Reply字段构成，显示



![图片](http://mmbiz.qpic.cn/mmbiz_png/TztEwAzAQIUonP2nm2oCubtD8B9Y3SjcCUicQJyaCiaQIHFjwY9e7SFuNp7NTsPmRsjHVXlZicOH3ULS6tqz6VzXQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   在中间的表格内，每一行都是一个I/O形态。下面，我们将介绍其中的每一个字段的含义：



**Transfer Request Size** – 指定每个I/O请求的读写字节的大小，默认是2KB，取值范围是1字节（0MB+0KB+1Byte）到差不多1GB（1023MB+1023KB+1023Byte），仅受限于可用的虚拟内存。



**Percent of Access Specification** – 指定每一种I/O形态（Edit Access Specification对话框中间表格内的每一行）所占一个访问规则的I/O百分比。默认是100%，取值范围是1%-100%，增量为1%。如果一个访问规则有多行（多个I/O形态），每一行的%Access字段决定了该行控制的I/O操作的执行几率，这些几率是%Read和%Random字段的几率结合后的结果。每一行的%Access字段的加法和必须等于100%，每一行的执行顺序是随机的，但随着测试时间的推移，访问规则中的每一行必然会以指定的几率执行。



注意：访问规则越复杂，需要运行测试的时间足够久才能确保随机选择操作会尽可能的与所配置的百分比相当。



**Percent Read/Write Distribution** – 指定读写操作的比例。（对于网络worker，写操作是发送，读操作是接收。当相应的服务器在“写”的时候，网络客户端总是“读”，反之亦然）。例如，指定%read = 40%，那么一个I/O有40%的可能性是“读”，60%的可能是“写”。这意味着读和写是随机的，但随着访问规则的执行，总的来看，Iometer会平均执行40%读和60%写（2：3的读写比例）



**Percent Random/Sequential Distribution** – 指定随机访问率（默认是100%）。例如，%Random = 60%表示一个I/O有60%的机会是访问一个随机地址，40%的机会访问一个顺序地址。这个值对于网络worker是忽略的。



小提示：要以顺序的方式访问磁盘，选中该磁盘并指派一个worker，设置# of outstanding I/Os =1。



**Burstiness Length** – 指定每个爆发的连续执行的I/O数量，可以输入任何非0值，默认是1。如果Reply字段为非0，这里指的就是事务数量（请求+响应），而不是I/O数量。

Transfer Delay – 指定在每一个I/O操作的爆发之前的延迟，默认是0，可以指定任何非负值，单位是毫秒（1000 = 1秒）。如果值为0，Burst Length是没意义的，因为在爆发之间没有任何延迟。

 

**Align I/O On** – 指定每一个磁盘I/O的对齐，默认是“扇区边界”。如果该字段的值是n字节，则每一个I/O会在磁盘的n倍字节处开始执行。取值范围从1到1023MB+1023KB+1023Bytes，但指定的值必须是磁盘扇区大小的倍数。指定0值或选择“扇区边界“单选按钮会使得I/O在扇区边界对齐。网络worker忽略该值。



注意：如果Alignment字段不是”扇区边界“且Size字段并非Alignment字段值的倍数，那么连续I/O将不会是真正的连续。例如，如果Size = 3KB，Alignment = 2KB，那么每个3KB I/O在其下一个I/O之前会有一个1KB的”洞“。例如，假设扇区是1KB大小，那么I/O落到磁盘上的视图就是DDDXDDDXDDDX….（D代表1KB数据，X代表为了对其而浪费的1KB空间）



**Reply Size** – 指定对每一个I/O请求的响应大小，默认是No Reply。取值范围是1Byte到1023MB+1023KB+1023Bytes，仅受限于可用的虚拟内存。0值或选择No Reply代表没有响应。



   如果Reply字段为非0值，一旦一个I/O请求完成，会立刻返回一个响应，即“读”请求会得到“写”响应，或“写”请求得到一个”读”响应（个人理解：涉及底层设备I/O处理，源发起“读”之后，接收方必然要把内容写回发起者的内存、硬盘等位置才能最后被源读取；而写请求也必然要求接收方先读取原先地址的内容才能进行写操作）。请求的大小由Size字段指定，响应的大小由Reply字段指定，请求与响应一同被称为一个事务。每个事务的请求从发起到响应完成所用的时间、最大和平均事务时间、每秒平均事务量都会被记录并报告。

如果指定了Reply，Reply的方向（读或写）总是请求的反方向，同时它的对齐和随机/连续等设置与对应的请求是一致的。如果指定了Burstiness，Burst字段指定的是事务（请求+响应）数量，而非I/O数量。













## Iometer学习笔记之四：详解“Results Display Tab”

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-10-05*

   Results Display Tab显示了一个运行过程中的测试的性能统计信息，你可以选择所要显示的统计信息、涉及的Manager或Worker以及显示更新的频率。下面，我们将做详细介绍。



   下图是Results Display tab的截图，同样有很多选项可以修改，在测试运行过程中，你可以更改Results Display Tab中的所有设置，且更改将立刻生效。Results Display Tab的设置不会影响启动系列测试时所指定的的结果文件，结果文件是在每一次测试结束时被更新的，包括每个worker和manager测试统计信息的最终结果（除非在Test Setup tab中指定了Record Results）。仅当所有的worker线程跑起来之后，Iometer才会记录worker的数据。



![图片](http://mmbiz.qpic.cn/mmbiz_jpg/TztEwAzAQIUonP2nm2oCubtD8B9Y3Sjch6P7EUrQoCibB6MohseI9uOUjuZt1qOr9fLf2ywV7YzlnvtJjYm48dQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

   我们来解释下其中一些选项的含义：



   **Results Since** – 选择显示的统计信息所跨越的时间段。

   **Start of Test** - 显示从测试开始后所收集的数据的平均值或总和

   **Last Update** - 显示从上一个更新开始后所收集的统计信息。例如，如果Update Frequency设置为5秒，显示的结果将是上一个5秒所收集数据的平均值或总和。



   **Update Frequency** – 指定多久（秒）更新一次统计信息，默认是”00”（无穷），即只在每次测试的结束更新显示信息。



   当Result Since = ”Start of Test”，每次更新显示的统计信息结果为从【测试开始】到【当前】为止所选中的平均值，而不是当前（瞬间）值。正是因为这个原因，当Update Frequency很小时，测试开头显示的结果通常波动幅度很大，但随着测试的运行会逐渐趋于平稳。每次测试的开头会把所有值重置为零。



  注意：获取run-time统计信息会影响系统性能。在运行一个大型测试系列时，应该把Update Frequency设置为“00”。另外，在测试时不要移动鼠标或运行任何后台进程（例如屏幕保护程序），避免不必要的CPU消耗和中断。



   **Bar Chart** – 在Display中有六个Bar chart，用于显示不同的统计信息。每个bar chart有以下组件：



   -Chart显示的统计信息（chart左边的按钮），按下该按钮会跳出一个层级菜单用于选择不同的统计信息，默认的留个chart是：



​     -Total I/O per Second

​     -Total MBs per Second

​     -Average I/O Response Time (ms)

​     -Maximum I/O Response Time (ms)

​     -CPU Utilization (total)

​     -Total Error Count



   -显示的Manager或Worker的统计信息（chart左上方的标签），默认是所有的chart都是All Managers，可以通过拖拽的方式把Manager、Worker、All Manager拉到chart上，单独显示需要的信息。



   -当前值（chart上的中间标签），该值仅在显示更新时才会变更，由Update Frequency指定

   -比列因数（chart右上方的标签），每个chart的比列因数由该chart显示的统计信息决定

   -Chart本身

   -一个用于弹出Presentation Meter对话框的按钮，显示与chart相同的统计信息

 

统计信息的分类十分多，但很容易理解每一个所表达的意思，这里就不一一解释了。

 

**Presentation Meter**对话框以大尺寸显示Results Display中的单个统计信息，在给一组人做演示时非常有用。每次只能开一个Presentation Meter对话框。



![图片](http://mmbiz.qpic.cn/mmbiz_jpg/TztEwAzAQIUonP2nm2oCubtD8B9Y3SjcgyyF61qhmJK2h7ddduIyPOMfEdrcb8rYWg1QxkQO5Kb1YSFD5SszZw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

Presentation Meter对话框的更新频率由Update Frequency决定，它还有如下设置：



**Range** – 指定了meter的上限，如果选中的统计信息超过了Range值，指针会停在最大值，但底下的文字标签会显示正确的meter值。Range默认值为100，下限总是0。



**Show Trace** – 显示meter的历史追溯信息。如果该选项被选中，在测试过程中会有一个蓝色的圆弧标记最高和最低值的范围。



**Test Control** – Start和Stop按钮用于开始和停止测试，而不需要关闭Presentation Meter对话框。



如果测试正在运行，Start按钮启动测试系列（同工具栏的Start Test按钮相同），Stop按钮会被禁用。



如果系列测试正在运行，Start按钮标签变成Next，点击Next将停止当前测试并启动下一个（类似工具栏上的Stop Current Test按钮）；Stop按钮中止系列测试（同工具栏的Abort All Tests按钮相同）。



如果是单个测试，或是系列测试的最后一个正在运行，Next按钮是禁用的，Stop按钮停止测试（与工具栏的Stop Current Test按钮一样）。















## Iometer学习笔记之五：详解“Test Setup”tab（1）

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-10-07*

  Test Setup tab可能是最难理解的一个tab，东西比较多，每个控制字段的解释多少有点拗口，理解它需要一点耐心。但它才是运行复杂测试的关键，所以有必要放点时间去搞懂。



   Test Setup tab控制着为每一个访问规则（Access Specification）而运行的测试以及其它一些关于Iometer如何工作的详细设置。（按下Start Tests按钮时，Iometer将运行一系列测试，每一个访问规则运行一次，而每一个测试又为每一个访问规则运行一次（设置Cycling Options指定多个测试，下面会具体讲），当前的测试编号显示在状态栏）

 

​    我们先介绍每一个控制字段的意义，在下一期会着重介绍Cycling Options，它是运行一个系列测试的关键。



![图片](http://mmbiz.qpic.cn/mmbiz_jpg/TztEwAzAQIUonP2nm2oCubtD8B9Y3Sjcia6NBic6P3cJibzG1aoFfTLxwuh1r2tqoTXMLeGMScpWvhcBF0dP5RR5w/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   Test Description字段用于描述当前的系列测试(series of tests)，该描述将被保存在results文件（点击Start Tests按钮时指定），并且可被用于记录当前系统配置、测试参数或任何你想要的信息。



   **Run Time** – 为系列测试中的每一个测试指定运行时间（小时，分钟，秒），默认值=0，表示每个测试将一直运行，直到你按下Stop按钮为止（如果有多个测试，STOP-All按钮将是可用的）。通常运行时间在15-60秒不等，复杂的访问规则或大型系统可能需要更久的时间。



   **Ramp Up Time** – 指定【在所有Worker报告说它们已经开始工作了之后，以及在开始记录每一个测试的统计信息之前】Iometer所等待的时间。在初始“ramp-up”期间（例如，当缓存数据饱和时），你可以使用该字段来避免记录任何统计信息。默认值=0。Ramp-up time通常从15- 60秒不等，对于缓存控制器、大型服务器或集群系统，你可能需要增加ramp-up time。



   **Number of Workers to Spawn Automatically** – 规定了一个manager默认创建的磁盘和网络worker的数量。当你按下工具栏上的Start New Manager或Reset Worker按钮时，以及当一个manager从命令行启动之后首次与Iometer联系时该值就会被引用。你可以指定许多worker，或选择“# of CPUs”为运行manager的机器上的每一个处理器指定一个worker。磁盘worker的默认值为“# of CPUs“，网络worker的默认值为0。



   **Record Results** – 用于指定results文件所记录的信息。正常情况下，每一个target，每一个worker，每一个manager以及所有manager的结果都会被记录。每一个worker的结果是其target的汇总；每个manager的结果是其worker的汇总；All Manager的结果是所有manager的汇总（“汇总”代表总数，平均数或每个统计信息的最大值）



   具体选项如下：



l All：为每一个target、worker、manager以及所有manager记录结果（默认选项）

l No Targets：为每一个worker、manager以及所有manager记录结果

l No Workers：为每一个manager以及所有manager记录结果

l No Managers：仅为所有manager记录结果

l None：不记录任何信息，这样一来，当开始测试时你不会被提示选择一个result文件



   **Cycling Options** (循环选项) – 指定了每一个访问规则将要运行的系列测试，它可用于为当前配置在各种不同的负载下自动收集数据，系列测试中的每一个测试结果将被分开记录在result文件内。



   除了Normal之外的所有测试类型都将指定一个系列测试，每个测试都会改变以下一个或多个对象的数量：



l 每个manager的worker数量

l 每个worker的target数量

l 每个target（仅disk worker）未处理的I/O操作的数量



   对于所有的测试，任何不被测试类型改变的对象数量将被设置为其默认（最大）值。



   每一个对象的数量都可以指定起始值（starting value），步进类型（stepping type，线性的或指数的）和步进值（step value）。例如，如果起始值是3，步进类型是线性的，步进值是2，最终序列（sequence）就是3，5，7，9…如果起始值是1，步进类型是指数的，power base = 2，最终序列将是1，2，4，8…Worker以及其target的顺序就是拓扑面板、Disk Targets、或Network Targets所显示的那样。



   每个序列的的最终值的决定对于每一个对象数量都是不同的。对于每个manager的worker数量，是由拓扑面板中拥有最多数量worker的manager决定的；对于每个worker的target数量，是由在Disk Targets或Network Targets中选择了最多的Targets的worker决定的；对于每个target的未处理I/O，是由Test Setup tab下的# of Outstanding I/Os决定的。如果并非所有manager都有同样数量的worker，或者不是所有worker拥有同样数量的target，那些拥有相对少量的worker/target的manager/worker会重复其最高值，而其他manager/worker将继续增加数量。



注意：cycling worker或target是忽略Network clients的。















## Iometer学习笔记之六：详解“Test Setup”tab（2）

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-10-08*

 

   上一期介绍了Test Setup tab下各个控制项的含义，本次将着重说明Cycling Options，理解它有助于构建复杂的测试环境，满足对不同场景的需求。



![图片](http://mmbiz.qpic.cn/mmbiz_jpg/TztEwAzAQIUonP2nm2oCubtD8B9Y3Sjcia6NBic6P3cJibzG1aoFfTLxwuh1r2tqoTXMLeGMScpWvhcBF0dP5RR5w/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   有以下测试类型可供选择，为了简单起见，每个测试用例都将假设所有的对象数量起始值为1，步进类型为线性，步进值是1。



   **Normal – run all selected targets for all workers**: 本测试类型只采用所有对象数量的默认值运行一个测试：所有manager的所有worker都是活动的，所有选中的target将被每一个worker使用，每个磁盘的未处理I/O由Disk Targets tab中的“# of Outstanding I/Os”字段指定。



此测试类型可用于快速测试当前系统配置，它也是默认测试类型。





**Cycle Targets – add step targets for all workers at a time**



   本测试类型将为每一个测试中的每一个worker增加target数量。测试数量由每个worker的target数量的最大值决定。例如，每个worker有三个target，那么本测试类型将运行三个测试：



1. 所有worker使用一个target（第一个选中的target）
2. 所有worker使用两个target（前两个选中的target）
3. 所有worker使用三个target（所有三个target）



这种测试可用于几种不同的场合，例如：



l 为来自不同适配器卡的磁盘分配worker，从而观察在将工作量分布到其他适配器卡之后的系统可伸缩性（scalability）

l 将worker指派给同一个磁盘，观察递增的传输请求队列

l 将worker置于单独的系统，观察一个共享总线的伸缩效果





**Cycle Workers – add step workers using all selected targets at a time**



本测试类型为每一个测试中的每一个manager增加worker的数量。测试的数量是由每个manager的worker数量的最大值来决定的。例如，如果每个manager有三个worker，本测试将运行三个测试：



1. 所有manager使用一个worker（第一个选中的worker）
2. 所有manager使用两个worker（前两个选中的worker）
3. 所有manager使用三个worker（所有三个worker）



   该测试可用于以下场合：



l 如果这些worker位于单独的系统，允许测试共享总线

l 为分布在不同适配器上的磁盘指派worker，观察同一个系统上负载严重的适配器卡的interaction

l 为同一个磁盘指派worker，观察增加请求队列的结果





**Increment Targets Parallel – add step targets to all mangers at a time**



   本测试类型增加每一个测试的每一个Manager的target数量，分发给该manager的worker。测试数量由【每个worker的target数量的最大值】与【每个manager的worker数量的最大值】的乘积决定。例如，如果每个manager有两个worker，每个worker有两个target，那么本测试类型将运行四个测试：



![图片](http://mmbiz.qpic.cn/mmbiz_jpg/TztEwAzAQIUonP2nm2oCubtD8B9Y3SjcSGByyibr9m9HeFVGoMwW7dThPvspV6cibzOgZjSFAiaotBmm50saGacicw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



本测试类型可用于确定一次性从所有客户端增加服务器负载的影响。





**Increment Targets Serial – Add step targets at a time**

**
**

   本测试类型增加每一个测试中所有Manager的target总数，并分发给每一个manager的worker。测试数量由【manager的数量】、【每个manager的worker数量的最大值】以及【每个worker的target数量的最大值】的乘积决定。例如，如果每个manager有两个worker，每个worker有两个target，本测试类型将运行八个测试：



![图片](http://mmbiz.qpic.cn/mmbiz_jpg/TztEwAzAQIUonP2nm2oCubtD8B9Y3SjcVicgL8FE94Y06PnjWN6fDQp80lJQmgdMLrfQibibUK3icJCLDHTdwYb0Fg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)
![图片](http://mmbiz.qpic.cn/mmbiz_jpg/TztEwAzAQIUonP2nm2oCubtD8B9Y3SjcOymgX2OQNNwShSF8WL4oibmt7gfX66gKZNJINHWBwHr1Ud5hYSeprhQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

  本测试类型可用于确定来自许多客户端到服务器的总负载增加量的影响。



**Cycle Targets and Workers – add step targets at a time spread across workers**



   本测试类型将为每一个测试中的一个worker增加target数量，然后重新开始为每一个测试中的两个worker增加target数量，以此类推。测试数量由【每个manager的worker数量的最大值】与【每个worker的target数量的最大值】的乘积决定的。例如，如果每个manager有三个worker，每个worker有两个target，那么该测试类型将运行六个测试：



![图片](http://mmbiz.qpic.cn/mmbiz_jpg/TztEwAzAQIUonP2nm2oCubtD8B9Y3SjcdL6KC7hQhe1UtEd7oeOMJbvXzTS7vtooPeJiaJnuktzJlDZOoYnm3zw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   该测试类型可用于总线和网络的可伸缩性的特征化。



Cycle #Outstanding I/O – run step outstanding I/Os on all disks at a time.

   为每一个测试的每一个磁盘worker的每一个磁盘增加未处理I/O的数量（对于网络worker，该值总是1）。测试数量由# of Outstanding I/O参数决定。例如，如果# of Outstanding I/O参数的终止（End）值为4，本测试类型将运行四次。



1. 所有worker对所有选中的target上的每一个target使用1个未处理I/O
2. 所有worker对所有选中的target上的每一个target使用2个未处理I/O
3. 所有worker对所有选中的target上的每一个target使用3个未处理I/O
4. 所有worker对所有选中的target上的每一个target使用4个未处理I/O



   需要注意的是，每个target所接收到的未处理I/O总量是每个worker的未处理I/O数量与使用该target的worker数量的乘积。



   Cycle #Outstanding I/O and Targets – run step outstanding I/Oson step targets at a time.



   本测试类型为所有worker的一个target增加未处理I/O的数量，然后为所有worker增加target数量。例如，如果每个worker有两个target，# of Outstanding I/O End = 3，该测试类型将运行六次：



1. 所有worker对1个target使用1个未处理I/O
2. 所有worker对1个target使用2个未处理I/O
3. 所有worker对1个target使用3个未处理I/O
4. 所有worker对2个target上的每一个target使用1个未处理I/O
5. 所有worker对2个target上的每一个target使用2个未处理I/O
6. 所有worker对2个target上的每一个target使用3个未处理I/O



   Workers – 用于为“Cycle Workers“和”Cycle Targets and workers“测试类型确定初始worker的数量、步进大小、步进类型（线性或指数），其它所有测试类型都忽略该控制字段（文本框将是灰掉的）。



   Targets – 用于为“Cycle Targets“、”Increment Targets Parallel“、”Increment Targets Serial”、”Cycle Targets and Workers”和“Cycle # Outstanding I/Os and Targets”测试类型确定初始target的数量、步进大小、步进类型（线性或指数），其它所有测试类型都忽略该控制字段。默认起始值 = 1，步进值 = 1，线性步进类型。



   \# of Outstanding I/Os – 用于为“Cycle # Outstanding I/Os”和“Cycle # Outstanding I/Os and Targets”确定未处理I/O的起始和最终数量，步进值和步进类型。对于以上两种测试类型，它会覆盖Disk Targets tab中的# of Outstanding I/Os字段，所有其它测试类型都忽略该控制字段。默认起始值 = 1，最终值 = 32，power base = 2，指数步进类型。网络worker忽略该字段，它的# Outstanding I/Os总是1。



