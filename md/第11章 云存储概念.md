# **第11章 云存储概念**







## 云计算定义 - NIST

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-05-27*

云计算是一种计算模型，实现无处不在、便捷、可通过网络按需访问的可配置计算资源池（例如，网络、服务器、存储、应用程序、服务），这些资源可以快速调配，最小化管理开销或与服务提供商的交互。云计算模型有五个必要特性，三个服务模型以及四个部署模型。

 

**必要特性**

 

**按需自助服务** – 消费者能够单方面按需自动调配计算资源，例如服务器时间和网络存储，而无需人为与每一个服务提供商进行交互。



**广泛网络访问** –混杂的瘦或胖客户端平台（移动电话、平板电脑、笔记本电脑和工作站）使用标准机制通过网络访问资源。



**资源池** – 通过多租户模型，提供商的计算资源池可用于服务多位消费者，根据用户需求动态分配或重新分配不同的物理和虚拟资源。资源感觉上是与位置无关的，因为客户通常无法控制或知晓资源的精确位置，但可以在高层抽象指定位置（例如，国家、洲或数据中心）。资源范例包括存储、处理器、内存和网络带宽。



**快速灵活性** – 资源能够灵活调配并下发，并在某些情况下可按需自动而快速的向外/向内等量伸缩。对于消费者，可调配的资源总是无限可用的，而且可在任何时候使用任意数量的资源。



**可度量服务** – 通过利用适用于服务类型的某些抽象层级的度量机制（例如，存储、处理器、带宽以及活动的用户帐户），云计算系统能够自动控制并优化资源的使用。能够监控、控制和报告资源使用率，为服务提供商和消费者提供透明的服务使用情况。

 



**服务模型**

 

**Software-as-a-Service (SaaS)** – 提供给消费者的资源运行在服务提供商的云计算基础架构之上。可以从各种客户端设备访问该应用程序，通过瘦客户端接口，例如Web浏览器，或是程序接口。消费者并不管理或控制底层的云计算基础架构，包括网络、服务器、操作系统、存储、或甚至应用程序本身，或许只允许部分受限的用户特定的应用程序设置。



**Platform-as-a-Service（PaaS）** - 提供可将使用由提供商支持的编程语言、库、服务和工具，由消费者创建或收购来的应用程序部署在云计算基础架构上的能力。消费者并不管理或控制底层云计算基础架构，包括网络、服务器、操作系统、存储，但对部署的应用程序有控制权，或许还可以配置宿主应用程序的环境。



**Infrastructure-as-a-Service（IaaS）**- 为消费者提供调配处理器、存储、网络以及其他可用于运行任意软件的基础计算资源的能力，包括操作系统和应用程序。消费者并不管理或控制底层云计算基础架构，但可以控制操作系统、存储和部署的应用程序，可能还被允许有限制的选择网络组件（例如，主机防火墙）。

 



**部署模型**

 

**私有云** – 云计算基础架构调配后用于包括多个消费者（例如业务单元）的单个组织，该云计算基础架构可以由该组织、第三方机构或他们的组合来拥有、管理和运营，所有基础架构可以位于组织内部或外部。



**社区云** - 云计算基础架构调配后用于某个拥有相同需求（例如，使命、安全需求、策略、合规性考虑）的消费者社区。该云计算基础架构可以由该社区中的一个或多个组织、第三放架构或他们的组合来拥有、管理和运营，所有基础架构可位于组织内部或外部。



**公有云** - 云计算基础架构调配后用于公众，该云计算基础架构可以由商业组织、学术组织或政府组织、或者他们的组合来拥有、管理和运营，所有基础架构位于云计算服务提供商。



**混合云** – 由两个或更多独立的云计算基础架构（私有、社区或公有）组成，通过标准或私有技术绑定在一起，实现数据和应用程序的可移植性（portability）。















## 云计算服务的三种类型（SaaS、PaaS、IaaS）

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-06-25*

   云计算可以帮助企业降低IT方面的成本和复杂性，并获得他们蓬勃发展所需的灵活性与敏捷性。但是，规划出通往云的明确路径并非易事。毕竟用户需要看透与云相关的市场大肆宣传，然后理解并分析不同种类的云计算模式的优点与缺点。此外，还需要确定备选的云中哪些最适合自己企业的战略、工作负载、性能、安全性需求和内部IT的专业知识，甚至希望将来某一刻可以完全地“Do it yourself“（自己动手）。



   本文将介绍“云“服务的三种类型，并讨论不同云计算模式满足什么类型的需要。

 

**什么是云计算？**

 

   云计算使用户能够通过Internet或专用网络访问软件、服务器、存储以及其他计算资源。这些资源与位置无关，具体表现在用户通常不需要管理甚至了解这些资源的实际位置。用户根据需要购买和使用IT资源，并根据使用量为其使用的服务付费。



   云计算构建在虚拟化技术的基础上，而虚拟化技术提供从弹性资源池中调配IT服务的功能。虚拟化可以将一个物理机分区为多个虚拟机，其中每一个虚拟机都可以独立与其他设备、应用程序、数据和用户交互，就像它是独立的物理资源一样。不同的虚拟机可以运行不同的操作系统和多种应用程序，同时共享单个物理计算机上的资源。因为每个虚拟机与其他虚拟机隔离，如果一个虚拟机崩溃，其他的不会受影响。除了使用虚拟化技术将一个计算机分区为多个虚拟机外，还可以使用虚拟化技术将多个物理资源合并为单个虚拟资源。存储虚拟化就是一个最好的例子：在此情况下，多个网络存储资源池化显示为单个存储设备，以实现对存储资源更轻松高效的利用和管理。



   虚拟机管理程序软件使虚拟化成为可能。这种软件也称为虚拟化管理器，位于硬件与操作系统之间，并使操作系统和应用程序与硬件隔离。虚拟机管理程序向操作系统和应用程序分配它们对处理器和其他硬件资源（例如内存和存储系统）所需的访问量。云提供商使用与他们提供的服务类型（存储、计算、带宽、有效用户帐户等）相关的计量功能来管理和优化资源。

 

**云服务的常见类型：**

 

   企业可以从数量不断增加的基于云的IT服务中进行选择和使用，并在不同类型的环境中部署它们。以下是三类最常见的“IT即服务”云产品：



- **软件即服务 (SaaS**，Software as a Service) 使用户可以通过 Internet 访问软件应用程序。用户不必购买并在自己的计算机或设备上安装、更新和管理这些资源，而可以通过Web 浏览器访问并使用它们。SaaS 提供商在云中为用户管理软件、处理能力和存储。大多数 SaaS 解决方案在公共云中运行（详见下文），并以订阅或免费服务的形式提供。常用 SaaS应用程序的例子包括按需业务应用程序，例如 Salesforce.com、Google Apps for Business 和 SAP SuccessFactors，以及免费的社交网络解决方案，例如 LinkedIn 和 Twitter。
- **平台即服务 (PaaS**，Platform as a Service) 提供在集成式云环境中开发、测试、运行和管理 SaaS 应用程序所需的基础架构和计算资源。拥有 Internet 连接的任何人都可以参与并开发基于云的解决方案，而不必寻找、购买和管理硬件、操作系统、数据库、中间件以及其他软件。大多数PaaS 供应商都可以提供比传统编程工具更易于使用的JavaScript、Adobe Flex 和 Flash 等工具。用户不必拥有或控制开发环境，但却能真正地控制他们在其中开发和部署的应用程序。一些知名度较高的 PaaS 提供商包括 Google App Engine、Windows Azure 和 Salesforce。
- **基础架构即服务 (IaaS**，Infrastructure as a Service) 提供托管的 IT 基础架构，供用户调配处理能力、存储、网络和其他基础计算资源。IaaS 提供商运行并管理此基础架构，用户可以在此基础架构上运行选择的操作系统和应用程序软件。IaaS 提供商的例子有 Amazon Elastic Compute Cloud (EC2)、VerizonTerremark和 Google Compute Engine。

 

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIUUBdAaCXRlW3jRmibhDKwet35djbQrqIhZhQtC5funetevGoXv0kRJOvfeD4ibalnS5mQ0X8OCH1zg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 



**云环境的常见类型：**

 

   上述三种云计算服务可以在以下几种类型的环境中提供：

- 公共云（Public Cloud）
- 私有云（Private Cloud）
- 混合云（Hybrid Cloud）



![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIUUBdAaCXRlW3jRmibhDKwetdYeWlJzqgw3zMUjPjiaCzSRWHQUoZA9ZKicwUDyxognhHiborZVsWyukw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   关于这三种云计算模型的详细介绍可以参考文章：[云计算的三种模型：公有云、私有云和混合云](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651770987&idx=1&sn=4e3c5d72b331784c0ac40a73d1a87523&scene=21#wechat_redirect)





















## 云计算的三种模型：公有云、私有云和混合云

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-06-02*

云计算将计算作为一种服务交付给用户而不是一种产品，在这种服务中，计算资源、软件和信息如同日常的水、电一样通过互联网交付给计算机和其他的计算媒介。按照商业模式的不同，云计算可以被分为三大类：公有云、私有云和混合云。这三种模式构成了云基础设施构建和消费的基础。本文作为“存储基础知识”系列文章之一，将介绍这三种云计算模型的概念和优势。

 

**公有云**

 

公有云是面向大众提供计算资源的服务。由商业机构、学术机构或政府机构拥有、管理和运营，公有云在服务提供商的场所内部署。用户通过互联网使用云服务，根据使用情况付费或通过订购的方式付费。

 

公有云的优势是成本低，扩展性非常好。缺点是对于云端的资源缺乏控制、保密数据的安全性、网络性能和匹配性问题。公有云服务提供商有Amazon、Google和微软等。下图显示的是一个为组织和个人提供云服务的公有云。

 

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIW7MAG7iaOUmrUTcPGwJjGSZm9B1w9bOuxBibJLPuuECBT1eI28ZXriafRU2UOrCfSA45WaXq27cMA8g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

**
**

**私有云**

 

在私有云模式中，云平台的资源为包含多个用户的单一组织专用。私有云可由该组织、第三方或两者联合拥有、管理和运营。私有云的部署场所可以是在机构内部，也可以在外部。下面是私有云的两种实现形式：

 

内部（on-premise）私有云：也被称为内部云，由组织在自己的数据中心内构建，如下图所示。该形式在规模和资源可扩展性上有局限，但是却有利于标准化云服务管理流程和安全性。组织依然要为物理资源承担资金成本和维护成本。这种方式适合那些需要对应用、平台配置和安全机制完全控制的机构。

 

 

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIW7MAG7iaOUmrUTcPGwJjGSZzLjpOGLFeRpI7Hh6sLzQt4TqgI17bkRoqTUWcdv4HRjp9rNpbh7saw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



外部（off-premise）私有云：这种私有云部署在组织外部，由第三方机构负责管理。第三方为该组织提供专用的云环境，并保证隐私和机密性。该方案相对内部私有云成本更低，也更便于扩展业务规模。下图是一个典型的外部私有云结构图。

 

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIW7MAG7iaOUmrUTcPGwJjGSZHVJQutvBaOBhBh8OOwsxun7tzymVz4hVqjEtGU4Ab3NQdoKnoWHd4A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

 

**混合云**

 

在混合云模式中，云平台由两种不同模式（私有或公有）云平台组合而成。这些平台依然是独立实体，但是利用标准化或专有技术实现绑定，彼此之间能够进行数据和应用的移植（例如，在不同云平台之间的均衡）。

应用混合云模式，一个机构可以将次要的应用和数据部署到公有云上，充分利用公有云在扩展性和成本上的优势。同时将任务关键型应用和数据放在私有云中，安全性更高。下图是一个混合云的例子。

 

 

# ![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIW7MAG7iaOUmrUTcPGwJjGSZtQ1ibKekugWn46c0ZpKghs3tMszrccCKm7BhFCx5MOZCSPym6ufrFibg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)













## Mware存储：SAN配置基础

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-06-26*

VMware存储不仅仅是将LUN映射给物理服务器这么简单。VMware vSphere允许系统管理员在一个物理机上创建多个虚拟机。



潜在的hypervisor和vSphere ESXi，能够使guest虚拟机同时使用内部和外部存储设备。本文将会讨论在vSphere上构建SAN的基础以及管理员在部署共享SAN存储时的考虑因素。





**VMware存储:SAN基础**



vSphere支持包括JBODs，硬件RAID阵列，SSD磁盘以及PCIe SSD卡在内的内部连接磁盘设备。但是，使用这些存储形式的一大不便在于它们是与单一服务器直接连接的。



但是，SAN存储却提供了一个共享的，高可用性以及弹性的存储平台，并可扩展至多服务器部署环境。此外，存储厂商在产品上添加针对vSphere的支持，提供比本地存储部署更好的性能和扩展。



使用NAS和SAN存储部署vSphere是可行的，但是本文仅涉及SAN，或者说块设备。涉及iSCSI，Fibre Channel以及FCoE协议。

 



**VMware文件系统以及数据存储：**



vSphere块存储的一大重要结构特性是使用了VMware File System（VMFS）。与传统服务器以文件系统来格式化块设备的方式相同，vSphere在块LUN上使用VMFS来存储虚拟机。



vSphere的存储单位是datastore，包含一个或多个concatenated LUN。在很多实例中，vSphere部署在LUN和datastore之间采用1:1的对应关系，但这并不是配置要求。



vSphere历经数个版本的更迭，VMFS同样经过了更新和改进，当前ESXi 5.1版本使用的是VMFS版本5。在扩展性和性能方面都有改进，单个datastore已能host多个虚拟机。



在datastore内部，虚拟机作为虚拟机磁盘文件（VMDKs）来存储。vSphere同时允许LUN的直接连接而无需VMFS格式化。这些设备称作原始映射设备（raw device mapping, RDM）。虚拟环境中的原始设备映射可以用来创建同虚拟机的直接连接。通过VMware RDM功能，I/O性能开销较高的应用程序可以获得巨大的性能提升，因为RDM可以从已有的SAN环境中直接调用命令。



这可以让用户加载一个现有的LUN。假如使用Exchange Server，并且它已经运行在SAN上面，当虚拟化该Exchange Server时，你会运行VMware转化器、Microsoft转化器或其它第三方产品来将物理机转化为虚拟机，如果只是转化了C盘驱动器，你可以在现有位置上加载原存储。这样服务器在将所有数据转化到VMDK过程中是不需要宕机的，也不需要额外分配空间用来迁移VMDK。





**VMware-SAN连接：**



vSphere支持Fibre Channel，FCoE和iSCSI块存储协议。



Fibre Channel协议提供一个多路径，高弹性的基础架构，但是对于专用存储网络设施需要额外支出，如光纤交换机和HBA。



相反，iSCSI为共享存储提供相对便宜的选择，因为网卡通常远比Fibre Channel HBA和融合网络适配器便宜。



在最新版本的vSphere之前，多路径是很难配置的，但是这一情况得到了改进。此外，iSCSI的连接速度目前限制在1Gbps和10Gbps。最后，对于管理员来说iSCSI设备的安全性更加复杂，因为其功能特性更加基础，并不适合于高扩展环境。





**配置限制：**



VMware对于块存储的配置大小有一些限制。适用于iSCSI和Fibre Channel：

LUNs per ESXi host – 256

Maximum volume size – 64TB

Maximum file size – 2TB minus 512 bytes



这些限制值很高对于大多数用户来说不太可能达到，但是在大规模共享部署环境下LUN的数量可能是一个问题，因此在vSphere架构内部署datastore的数量和类型是至关重要的。





**Hypervisor功能特性：**



vSphere hypervisor包含一些管理外部存储的功能特性。



Storage vMotion使虚拟机能够在datastore之间移动，而虚拟机不用宕机。这能够很好地实现负载均衡或从老硬件设备实现数据迁移。



Storage DRS(SDRS)为基于策略的存储提供了可能。新的虚拟机的创建可建立在基于服务的策略上，如IOPS和容量。此外，一旦虚拟机部署完成并投入使用，SDRS可确保容量和性能在多个类似的datastore之间实现负载均衡。





**存储功能特性：**



vSphere hypervisor包含一些管理外部存储的功能特性。



vStorage APIs for Array Integration(VAAI)是ESXi 4.1引入的一系列附加SCSI命令，它可以让主机将特定的虚拟机和存储管理操作卸载(offload)到兼容的存储硬件中。在存储硬件的帮助下，主机执行这些操作起来会更快，同时能节省CPU、内存和存储网络带宽资源。



上述功能特性是通过vSphere”primitives”直接映射到新的SCSI命令来实现的。这些功能包括原子硬件辅助锁定，其在VMFS内对文件锁定有更好的粒度。这个特性提供了一种替代性的保护VMFS集群文件系统元数据(metadata)的方法，可以改善共享同一数据存储的ESX服务器大集群的可伸缩性(scalability)；全拷贝，将数据复制工作给阵列。这个特性使得存储阵列能够在阵列内部直接完成全体复制，不再需要ESX服务器参与读取和写回数据的过程；块清零，将精简调配环境下的VMFS清零工作卸载给阵列。这个特性使得存储阵列能够快速清零产生大量的存储块，从而加速虚拟机的部署和供给(provisioning)。VAAI由此扩展到SCSI UNMAP，允许hypervisor控制存储阵列空出精简调配环境下的释放资源。



**硬件辅助锁定：**

VMFS文件系统允许多主机对同一共享逻辑卷的并发访问，这是vMotion运行的必要条件。VMFS有一个内置的安全机制，防止虚拟机被超过一台的主机同时运行或修改。vSphere采用“SCSI预留”作为其传统文件锁定机制，这种方式在某项存储相关的指令操作期间，比如增量快照增长或发生时，均使用“RESERVE SCSI”命令锁定整个逻辑卷。这有助于防止冲突，不过也拖延了存储工作的完成，因为主机必须等待逻辑卷的解锁命令“RELEASE SCSI”才能继续写入。使用Atomic Test and Set(ATS)命令是一种硬件辅助的锁定机制，可以离线地对存储阵列加锁，这样就可以对个别磁盘数据块而非整个逻辑卷。这样可以使得余下的逻辑卷在锁定期间继续被主机访问，十分有助于避免性能下降。该功能同时通过VMFS数据存储，允许同一集群中部署更多的主机，以及更多的虚拟主机部署在同一个逻辑卷上。



**全拷贝：**

通过Full Copy技术，部署虚拟机的能力将得到极大提升，因为相应的处理工作可以在存储阵列内部，或者在存储阵列之间（有些存储厂商的阵列支持xcopy功能）完成，过去花费几分钟的处理工作现在已变成几秒钟的事情，同时ESX服务器的CPU负载也会减少（因为其参与的数据流量减少）。该特性的好处对于桌面基础架构环境更有意义，这种环境下很可能涉及到基于模板部署数百个虚拟机之类的工作。



对于Storage vMotion，迁移虚拟机寄居地的过程用时也将得到类似缩减，因为复制过程不再需要上传给ESX服务器再下达到阵列设备，这将极大释放存储I/O和服务器CPU周期的占用。



Full Copy不仅可以节省处理时间，还可以节省服务器的CPU、内存资源以及网络带宽和存储前端控制器I/O。对于上述的大多数度量指标，Full copy最多可达到95%的减幅。



**块清零：**

让阵列对磁盘完成大片清零(bulk zeroing)将加速标准初始化过程。block zeroing的一个用途是创建急性清零厚模式(eager-zero thick)格式的虚拟磁盘。如果不使用block zeroing技术，创建命令必须要等到磁盘阵列清零任务全部完成后才能结束。对于大容量磁盘，这可能会持续较长时间。block zeroing（也称为copy same）会让磁盘阵列立即把游标(cursor)返回给发出请求的服务（仿佛写零过程已经被完成），然后再完成清零生成存储块的工作，这时不再需要全程持有游标直至工作结束。



vStorage APIs for Storage Awareness (VASA) 是另一套API，允许vSphere在阵列内获取更多潜在存储资源信息。包括诸如RAID级别，是否精简调配以及数据消重等特征信息。VASA解决的精简配置所存在的另一个问题就是空间回收。当在Windows或Linux上删除文件时，并没有从磁盘上物理删除该文件。恰恰相反，该文件被标记为删除，只有在创建新文件后，被删除的文件才最终被删除。在大多数情况下，这并不是个问题。但对位于精简数据存储之上的精简虚拟磁盘来说，这可能会导致无法控制精简卷的增长。这是因为删除文件后，空闲的磁盘空间并没有返还给存储阵列。

 



**部署SAN存储的关键步骤：**



存储管理员在部署SAN存储时应当考虑以下步骤：



**厂商以及功能支持**

大多数，但并非所有存储供应商支持vSphere的高级功能，如VAAI以及VASA。如果有可能用到以上功能，需小心确认。目前，vStorage阵列集成应用接口只针对基于数据块的存储阵列（光纤存储或iSCSI）有效，并不支持NFS存储。厂商对于VAAI的支持一更不相同，某些厂商，诸如EMC，很快地支持了这些功能，而另一些厂商花费了很长的时间将其整合到他们的所有存储阵列型号中。你可以通过查看VMware对光纤存储的兼容列表来了解哪些存储阵列支持特定的vStorage应用接口特性。通过VMware光纤存储兼容列表，你可以搜索你的存储阵列是否可以支持VAAI，如果这样，其它的应用接口也是支持的。



**HBA支持以及专用iSCSI连接**

如果管理员计划部署Fibre Channel，那么HBA必须在VMware硬件兼容性列表上。每一个服务器上的HBA数量将取决于期待工作负载，并且至少需要2个硬件冗余。对于iSCSI，需要使用专用的网卡，因此也需要多个冗余。



**Datastore大小**

可能的情况下，创建尽可能大的datastore。要在存储产品的限制范围内，特别是精简调配情况下。从而减少用户未来需要对数据进行移动的可能。



**Datastore类型**

Datastore是当前虚拟机性能的最低粒度。因此，管理员应当促使datastore与工作负载类型相匹配。例如，测试和开发数据应当放在较低性能存储。将datastore映射到LUN时，存储管理员还应当对基于阵列同步保护的LUN创建单独的datastore。

 



**VMware以及存储的未来：**



VMware已经勾勒出vSphere块存储的演变，以虚拟卷（vVOLs）的形式展现。当前，一个虚拟机是由位于物理LUN映射的datastore上的多个文件系统组成的。vVOLs提供将虚拟机文件抽象成名为vVOL的容器的机会，目的是开启仅针对虚拟机本身的QoS功能。目前，QoS仅能作为整个datastore的属性，这会导致仅仅为了保证虚拟机接收到它所申请的服务层级而进行数据迁移。



与VMware相同，其他供应商也已经开发出专门针对VMware的平台。Tintri 是一个很好的例子，尽管它使用NFS而不是块协议。Tintri VMstore 平台熟悉构成虚拟机的文件类型，因此可以确保服务质量，性能跟踪以及闪存利用被准确定位于虚拟机级别。















## 对比ScaleIO和VMware的VSAN技术(上)

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-06-27*

目前企业级存储应用有二大趋势。1、随着云计算性能、速度和弹性的提高，以及托管费用的降低，越来越多的中小型企业纷纷投向公有云服务。2、金融公司、大型企业和政府部门则通过EMC、VMware、CISCO、IBM等IT巨头提供的解决方案部署自己的私有云。

 

随着私有云规模的扩张以及越来越多中小企业将应用迁向公有云，传统的存储管理技术面临的成本和管理挑战已经越来越大。虚拟SAN就是一种新兴的存储解决方案，它可以利用软件将应用服务器的硬盘组织成一个共享存储，从而现实了软件定义存储。本文将分别介绍ScaleIO和VMware的虚拟SAN技术，然后进行参数和应用范围对比。



 

**ScaleIO的VSAN技术**

 

ScaleIO的VSAN技术叫ECS，该技术可以利用数据中心里的数千台服务器构建成一个可扩展的文件系统，而且新旧服务器都支持。企业无需雇佣具有特殊技术才能的存储管理员或增加现有服务器管理员的工作量，即可使用ScaleIO的ECS技术实现上述目标。企业客户可以使用现有的服务器，或者新购买的服务器，他们无需购买主机总线适配器、交换机或是SAN，他们可以在他们选定用来运行关键商业应用的服务器上建立一个虚拟SAN。他们可以在服务器上同时运行他们自己的商业应用和我们的软件，建立一个全新的SAN。

 

 

ScaleIO系统在搭建时需要至少三个SDS服务器，该系统主要由硬件和软件二部分组成：

 

**硬件：**

硬件通常是指所在数据中心现有的应用程序服务器或者新的节点集。ScaleIO系统的硬件包括二部分：

 

- **节点**

节点或服务器用于安装和运行ScaleIO系统。ScaleIO 1.2版本兼容的操作系统包括Linux CentOS 6.0及以上版本、Linux Red Hat 6.0及以上版本、VMware ESX 5.0或5.1和Xen Server 6.1版本。

 

- **存储介质**

ScaleIO支持的存储介质包括：HDD、SSD、PCIe闪存卡，也支持DAS或者外部连接。

 

 

**软件：**

ScaleIO系统主要包含以下组件：

 

- **Mete Data Manager（MDM）**

MDM用于配置和监控ScaleIO系统。MDM可以配置在三个成员（需三台服务器）的冗余集群模式或者一个成员（需一台服务器）的单一模式。

 

- **ScaleIO Data Server（SDS）**

SDS用于管理单个服务器的容量，供前端数据访问。SDS软件需要安装在为ScaleIO系统提供存储的所有服务器上，这些服务器通过SDS被其它设备访问。

 

- **ScaleIO Data Client（SDC）**

SDC是一个轻量级的设备驱动程序，用于将ScaleIO卷转换成块设备，然后供安装了SDC的服务器使用。

 

 

下图展示了一套ScaleIO系统的解决方案，该方案中包括三个安装了ScaleIO套件的服务器。



 

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVxaDkVPKlvPgb0BXc95vKzP8aiar9GTD6AQb5yzLyuU7wA7ic2Fxs7h4QIEgFpUQr8o5G5IDg1uePQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

在配置ScaleIO系统前，有二个主要的概念需要用户了解：保护域（Protection Domain）和存储池（Storage Pool）。这二个概念是ScaleIO系统中物理层和虚拟层之间的桥梁。

 

**保护域（Protection Domain）**

每个保护域（Protection Domain）都包含一组SDS组件，每个SDS组件只能属于一个保护域。因此，每个保护域是一组唯一的SDS组件。

 

 

**存储池（Storage Pool）**

存储池（Storage Pool）是保护域（Protection Domain）中的一组物理存储设备，每个物理设备只属于一个存储池。默认情况下，一个保护域中只有一个存储池，用户可以自定义设置。下图中，一个保护域中有二个存储池。

 

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVxaDkVPKlvPgb0BXc95vKzDianUfJr2Hq8GdF11ZRLwsPQGBEDehZ5ibw4oqvsjx7F0VdQVibhzOhUg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)





**ScaleIO应用**

 

ScaleIO系统的安装过程非常简单。一般情况下分为二个步骤，首先建立物理存储层，然后配置虚拟SAN。

 

**（一）建立物理存储层**

物理层是由硬件和ScaleIO软件组成，用户可以通过下列步骤完成物理层安装：

 

1.确认集群MDM方案。用户可以选择三节点的冗余管理方案或者单一节点方案，然后安装MDM组件。

2.确认ScaleIO系统中需要使用的所有节点，然后在这些节点上安装SDS组件。

3.确认所有需要访问虚拟SAN的节点，然后在这些节点上安装SDC组件。



![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVxaDkVPKlvPgb0BXc95vKzBoxUGfQuHcszQEWstl4yy7KTCpzmtGX6FvwXG2FyMl4wd7iafqoDB9A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

ScaleIO系统的节点间将利用现有局域网进行通信，使用标准TCP/IP协议。SDS可以有多个IP地址，以便提供更宽的带宽和更好的冗余。

 

 

**（二）配置虚拟SAN**

 

在ScaleIO系统中，MDM用于配置虚拟SAN。它首先将汇聚所有SDS组件来生成一个虚拟SAN存储，然后将卷定义到存储池（Storage Pool），最后导出给安装了SDC的服务器使用。用户需要通过下列步骤将虚拟SAN导出：

 

1.定义卷。每个卷都是均匀的分布在存储池上，存储池是保护域（Protection Domain）中的一组物理存储设备，通过RAID保护方案确保数据安全。

2.映射卷。指定SDC组件可以访问的卷，SDC和卷在映射时没有限制，可以将所有卷映射到所有SDC上面。

 

 

**配置案例**

 

本案例将演示如何为ScaleIO 1.2版本的系统添加卷。

 

1．完成物理层安装；

2．在ScaleIO系统上创建卷，运行下列命令：

 

[root@rhel02 ~]# scli --mdm_ip 192.168.1.130 --add_volume--protection_domain_name pd2 --storage_pool_nameHDD --size_gb 30 --volume_namepd2_hdd_vol2

 

本例中参数如下：

•  MDM主机IP地址：192.168.1.130

•  保护域：pd2

•  存储池：HDD

•  卷大小：30GB

•  卷名称：pd2_hdd_vol2

 

 

\3. 映射卷到SDC，运行下列命令：

 

[root@rhel02 ~]# scli --mdm_ip 192.168.1.130 --map_volume_to_sdc--volume_name pd2_hdd_vol2 --sdc_ip192.168.1.101

 

本例中参数如下：

•  MDM主机IP地址：192.168.1.130

•  映射主机IP地址：192.168.1.101

 

 

\4. 挂载卷

 

当卷映射到SDC成功后，就可以在Linux主机上进行卷挂载，命令如下：

 

[root@rhel01 ~]# mkfs -t ext4 /dev/scinib

[root@rhel01 ~]# mkdir /mnt/vol2

[root@rhel01 ~]# mount /dev/scinib /mnt/vol2

 















## 对比ScaleIO和VMware的VSAN技术(下)

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-06-28*

在上一篇文章 [对比ScaleIO和VMware的VSAN技术(上)](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771095&idx=2&sn=c52ef484ef943f41549f0115aad334df&scene=21#wechat_redirect) 中，我们介绍了ScaleIO Virtual SAN的实现组件、设计架构、具体应用和配置案例。



本文将继续介绍VMware Virtual SAN的实现原理、实施要求和配置步骤，然后对比ScaleIO VSAN和VMware VSAN的具体参数。 

 



**VMware的虚拟SAN**

 

VMware在vSphere 5.5中引入了Virtual SAN技术，迈出了实现存储虚拟化的第一步。VMware VSAN将 vSphere 集群中的主机本地连接的磁盘聚合起来，然后创建一个分布式共享存储，它可实现在 VMware vCenter中快速调配存储，作为虚拟机创建和部署操作的一部分。

 

VMware VSAN是一种混合磁盘系统，它利用聚合本地固态驱动器 (SSD) 作为缓存，同时结合使用本地硬盘驱动器 (HDD)来提供可供虚拟机使用的集群式数据存储。这样既能实现企业级性能又能提供具有强大恢复能力的存储平台。在 VMware VSAN 环境中，需要配置若干 ESXi 主机以形成一个 VMware VSAN 集 群。所有 ESXi 主机均通过VMware Virtual SAN专用网络进行通信。大部分主机均需要配备本地硬盘驱动器，其中大部分配有本地固态驱动器。未配备本地磁盘驱动器的主机可以共享计算资源并利用集群式存储资源。本地固态驱动器可以优化所有主机的存储使用效率。通过组合每台主机上的本地硬盘驱动器和固态驱动器，最多可形成 5 个本地磁盘组。每个磁盘组只能使用一个 SSD，但最多可以使用5个硬盘驱动器。



![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVxaDkVPKlvPgb0BXc95vKz9631ibYv7YbvXySyn691rkXl0eNcLkrB3J9XlNqicgia8DjZv2IAff1Zg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

**VMware VSAN 实施要求：**

—— 一个群集配置至少三台主机

—— 所有三台主机都必须提供存储

- vSphere 5.5 U1 或更高版本

—— 本地连接的磁盘

- 磁盘 (HDD)
- 基于闪存的设备 (SSD)

—— 网络连接

- 1GB 以太网
- 10GB 以太网（首选）

 

 

创建磁盘组需要指定一个基于闪存的设备（SAS、SATA、或 PCIe 固态硬盘）以及一个或多个磁盘（SAS 或 SATA 硬盘）。磁盘组构成了Virtual SAN 数据存储的分布式闪存层，并为其提供存储容量。Virtual SAN 分布式闪存层通过在所有磁盘前端提供读缓存和写缓冲，优化了虚拟机和应用的性能。存储容量分为两部分：70% 用于读缓存，30% 用于写缓冲。所有磁盘组先通过改进的磁盘上文件系统VMware vSphere VMFS-L 进行格式化，然后作为单个数据存储装载到对象存储文件系统数据存储中。每个磁盘的VMFS-L 格式化共占用750 MB 的容量。



磁盘组、设备和开销表：

| 项目                               | 最小                 | 最大               |
| ---------------------------------- | -------------------- | ------------------ |
| 磁盘组                             | 磁盘组每个主机上一个 | 每个主机上五个     |
| 闪存设备：SAS、SATA、PCIe 固态硬盘 | 每个磁盘组一个       | 每个磁盘组一个     |
| 磁盘设备                           | 每个磁盘组一个硬盘   | 每个磁盘组七个硬盘 |
| 磁盘格式化开销                     | 每个硬盘 750 MB      | 每个硬盘 750 MB    |

 



通过组合VMware Virtual SAN集群中所有ESXi主机的磁盘组，可创建一个VMware Virtual SAN数据存储。每个VMware Virtual SAN集群只有一个数据存储，因此它包含了该集群中的所有HDD 和 SSD 资源。通过对象存储文件系统（OSFS），所有主机上的VMFS卷可以合并为一个数据存储进行安装。此数据存储包含所有虚拟机文件 （包括 vmdk 文件）。每个Vmdk文件可创建不同的虚拟机存储策略, 用于定义数据存储中数据在磁盘上的存储方式。通过配置这些虚拟机存储策略可充分利用VMware Virtual SAN 的功能。

 

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVxaDkVPKlvPgb0BXc95vKzkKA7ncq3uZylfIFb9SviboUNL00hbzUgkrp7znEzROhVfyGxomYS8Bg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

VMware Virtual SAN 数据存储可在以下方面帮助管理员使用软件定义的存储:

 

- 存储策略按虚拟机的体系结构配置：每个数据存储可配置多个策略使得每个虚拟机可以拥有不同的存储。
- vSphere 和 vCenter 集成：VMware Virtual SAN 功能是内置的,无需任何虚拟设备。如同vSphere HA 或 DRS 一样,您可以创建一个 VMware Virtual SAN 集群。
- 横向扩展存储：一个集群最多可以包含8台ESXi主机。通过在集群中添加新节点或将VMware Virtual SAN设置为扫描并自动添加空磁盘，可以实现扩展。
- 内置恢复能力：具有一条默认策略，系统会镜像所有未针对VMware Virtual SAN配置的虚拟机对象。
- SSD 缓存：在写入 HDD 前，会将所有 I/O 转入 SSD 并进行缓存。
- 聚合式计算和存储：甚至那些没有本地存储的虚拟机也可以利用VMware Virtual SAN存储资源。



![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVxaDkVPKlvPgb0BXc95vKz6cHdx4icZYGmxCxoc03SRASYyY8WVNVhHNq9GDicIXwBeGImiavwSgVjA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



 

**VMware VSAN 的配置步骤：**

首先，配置用于 VMware VSAN 的 VMkernel 网络，并允许所有主机访问该网络。

 

然后，创建一个集群并针对 VMware VSAN 启用该集群。将所有主机添加到这一VMware VSAN 集群中。

可以采用“手动”或“自动”模式配置VMware VSAN 集群。 如果在“自动”模式下配置VMware VSAN，则VMware VSAN会要 求使用所有本地磁盘来创建分布式Virtual SAN 数据存储。如果在“手动”模式下配置VMware VSAN，则必须通过创建 “磁盘组” 手动选择要添加分布式Virtual SAN 数据存储的磁盘。默认的模式为自动模式。VMware VSAN会扫描所有主机中的空磁盘。当它找到这些空 磁盘时,会对其进行配置以用于VMware VSAN。

 

在集群中启用 VMware VSAN 时，会创建单一的Virtual SAN 数据存储。此数据存储可 以使用集群中所有主机的存储组件。使用对象存储文件系统（OSFS）可以安装存储。VMware VSAN 在VSAN 数据存储中以灵活的数据容器的形式存储和管理数据。对象是一个逻辑卷，该逻辑卷有自己的分布式数据和元数据，并且可以跨整个集群进行访问。在ESXi 存储堆栈中, 这些对象以设备的形式出现。尽管只为整个VMware VSAN 集群创建了一个Virtual SAN 数据存储，但该数据存储可 以有多个与之关联的存储策略。这些存储策略可配置不同的存储功能。

 

 

 

**ScaleIO和VMware的VSAN参数对比**

 

ScaleIO的ECS和VMware VSAN基本上做同样的事情，通过一组主机的存储来建立虚拟SAN，然后在集群内共享。ScaleIO是一个管理程序，支持不同操作系统的物理服务器，可以扩展到数百台机器。VMware VSAN只能应用于ESXi主机，被集成到vSphere内核中，只能最多扩展到32个节点。另外，二项技术以不同的方式来使用混合存储，结构完全不同。下表对比了ScaleIO的ECS和VMware VSAN的参数：

​       

|              | VMware                   | ScaleIO 1.2版本                                              |
| ------------ | ------------------------ | ------------------------------------------------------------ |
| 节点         | 3台 —— 32台              | 3台 —— 大于100台                                             |
| 网络类型     | VMware VSAN专用网络      | IP网络                                                       |
| 存储介质     | 本地磁盘                 | 本地磁盘                                                     |
| 是否支持VIPR | 支持                     | 支持                                                         |
| 对象类型     | vSphere 5.5 U1或更高版本 | Linux CentOS 6.0及以上版本、Linux  Red Hat 6.0及以上版本、VMware  ESX 5.0或5.1和Xen Server 6.1版本 |

 

















## 云计算时代如何部署你的应用？公有云、私有云、混合云还是原有环境？

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-07-22*

   “云”时代已全面开启。不仅业务好处颇具吸引力，云技术快速成熟，公共云服务如雨后春笋般涌现，而且私有云已证明是适合各种业务应用程序的稳健而且安全的平台。问题已不是要不要使用云，而是如何使用云来优化信息系统和技术的成本效益和业务绩效。



   现在的问题是： 每一个应用程序，或者一组相关的应用程序，归属于什么样的环境？公共云、私有云、混合云还是组织的原有计算环境？各个“工作负载”放在何处可提供最佳的性能、成本和灵活性组合？从这一角度出发，我们将通过三个最基本的过滤条件 — 经济性、信任和功能性 — 来评估一些典型工作负载，以向您展示如何回答这一问题。关于云计算和云服务的基础知识，推荐阅读之前的文章：



   [云计算的三种模型：公有云、私有云和混合云](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651770987&idx=1&sn=4e3c5d72b331784c0ac40a73d1a87523&scene=21#wechat_redirect)

   [云计算服务的三种类型（SaaS、PaaS、IaaS）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771085&idx=1&sn=f916de9dd7b5b9499b0320347fae3140&scene=21#wechat_redirect)





**云业务优势:**

 

   云计算的潜在经济效益无疑引人注目：

- 借助私有云平台，组织可更高效地利用其技术并降低其物理基础架构的占用空间和成本（包括能源成本）。传统数据中心成本将大幅降低。

- 由于公共云的规模经济效益，可降低电子邮件和协作工作区等商品化服务的资源调配成本。借助软件即服务，可降低使用和维护业务应用程序的成本。借助按使用付费模式，应用程序和其他服务的持续成本会降低并与实际业务需求保持一致。

- 通过优化跨公共云、私有云和混合云的工作负载分配和管理，组织可将其基础架构和人员 IT 总支出降低25-30%。

  

  

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIUw8K62H1PvfuvloamdJpuEKzx3CzicQnI6v287PnN1zRlVwgaYdbDWDuC7AHY6yZu7jzpo0erAgeg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   尽管这些直接成本节省和成本结构缩减已颇具吸引力，但云计算最大的回报还体现在其他两种业务优势上：

- **生产效率。**业务人员可按需访问更多信息以及使用此类信息所需的工具。他们可更方便地进行协作并共享信息、专业知识和其他资源。IT 人员的日常信息系统操作和管理工作量大幅减少，因此他们可将更多精力放在技术推动的业务改进上。
- **敏捷性。**通过按需访问模块化信息资产，人员可以汇集新业务能力并快速将创新产品推向市场。接着，他们可以扩大这些创新产品的应用范围并将其集成到业务运营中，同时最大程度地减少中断。他们还可以在破记录的短时间内访问、试验和部署基于云的新业务应用程序和服务。



   云可同时从多个方面提高业务绩效：成本、可管理性、信息访问、新功能部署、协调和协作、业务连续性和安全性、业务创新和增长。这是组织从计算环境中获得最佳功能、性能和成本组合的方式。

 



**使用三个筛选器进行工作负载分析：**

 

   企业应该具体评估哪些应用程序和信息适用于云计算以及各自适用的最佳云类型。这涉及通过三个筛选器（经济性、可信度和功能性）了解每项资产及其迁移到云的可能性。

   ![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIUw8K62H1PvfuvloamdJpuEnRZxEnEEFTKeShYzbQxGHhShyX6EpnmncibR8G6WEUiaR9Gn5uEtEPLw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   应用这三个筛选器后，候选项范围（尤其是针对短期云迁移）将缩小，且每个工作负载的首选云部署目标将显现。将这三个筛选器的结果相组合，综合考虑这些结果的相互影响后，再进行调整。例如，如果因保持工作负载功能或采用安全增强措施来调整其信任概况而产生额外费用，“总”成本可能改变。请记住，出于业务绩效和敏捷性原因，有时不能将边际经济回报作为判定某工作负载不适合云的标准。

   ![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIUw8K62H1PvfuvloamdJpuEOeug12KqFuRx7243kMIpiaNAFu7mx5N8qg4JllyzkJu4eAdj4n2rYog/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 



**将工作负载映射到云选项：**

 

   通常，您会发现那些可接受低于 100% 可用性的广泛使用且相差不大的工作负载适合公共云（例如，电子邮件、协作空间以及时间和费用报告等）。大多数核心业务应用程序 — 特别是定制的应用程序、或与其他应用程序紧密集成的应用程序、或必须履行任务关键型服务级别协议的应用程序 — 归属私有云。电子商务应用程序等面向市场的工作负载可能需要混合云，以便快速扩展以满足峰值需求。运营控制系统等专业化程度高且微调的工作负载保留在原有环境中。但是，这种区分比较笼统。有多种变化形式，因此组织必须详细评估其工作负载。



   逐个评估工作负载后，形成总体概念。工作负载跨平台的新分布将是什么样子？关键信息将如何跨工作负载和平台流动？接口如何工作？对经济性、可信度和功能性的总体影响如何？

 



**不要放在云中的内容：**

 

- 自包含和专业化程度高的业务应用程序，如金融服务中的实时制造控制系统和分析交易系统。这些在特定业务职能内将成为复杂的“重负荷”系统，且共用这些资源的价值有限。它们可能会定期连接到基于云的系统以获得最新信息，但是以云服务客户的形式，而不是在云中托管的资源。
- 出于法律或监管原因（如当地隐私法律）而必须绝对与计算环境的其他部分“隔开”的应用程序和数据库。公司倾向于以物理方式隔离此类资源，以实现安全。但是，借助最新虚拟化管理方法，企业在私有云中可以管理的这类敏感资产通常会超出设想数量。
- 针对特定（有时是专有）系统体系结构编写并进行了性能优化的应用程序。随着时间推移，可以选择将此类资产翻新为在云中共享和运行。















## 私有云项目实施的四个阶段

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-07-13*

   云计算的三种模型，之前已经有过多次介绍了，详见：[云计算的三种模型：公有云、私有云和混合云](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651770987&idx=1&sn=4e3c5d72b331784c0ac40a73d1a87523&scene=21#wechat_redirect) 和 [云计算服务的三种类型（SaaS、PaaS、IaaS）](http://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651771085&idx=1&sn=f916de9dd7b5b9499b0320347fae3140&scene=21#wechat_redirect)。



​    用户在选择不同的云计算部署模式时，应先深入了解这些不同模式之间的差异：

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIXmeBADkJ0icPXj7lFia25HoJMf7GcL3yxJBkibBVOfC4YqaSaWAvncsUop4sRaV9T3yNb7owjcM4rwg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   在过去一段时间里，采用私有云的企业已有显着增长。这是由于私有云可以提供公共云的一些优势，但却解决了部署公共云的潜在缺点。然而，推出私有云是一项非常复杂的工程，可能需要大规模投资在技术、流程和技术人员上。

  

   本文将探讨实施私有云的几个重要步骤，并着重分析云部署网络的影响。

 



**云实施阶段:**

 

   云实施的四个重要阶段，如下所示：

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIXmeBADkJ0icPXj7lFia25HoJs2mMpVqGnOouue7y0iaygibj5fSHfNseapIcGKI9g0Z0Pib2Wk3IlW55g/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

**
**

**整合：**

 

   企业机构可以通过各种虚拟化技术，整合其基础设施来大幅度提高网络效率。虚拟化是迁移到云计算机构的第一步，因它可创建无缝的资源逻辑存储并增加技术资产的使用率。虚拟化将应用程序与硬件基础设施分开，从而获得更高的服务灵活性。虚拟化正确实施后，将能更有效地重新配置资源，提高灵活性和降低运营成本。目前，服务器虚拟化是最广为人知的虚拟化类型，此外用户也应考虑虚拟化存储系统、应用程式、网络基础设施和端点，如台式电脑，这些都将有助于整合工作的进行。

 



**优化：**

 

   整合IT 基础设施可通过增加资产利用率提高效率。但是，整合必须先通过优化存储、网络和服务管理层，使其支持虚拟化基础设施，并达到一致的共同需求。有报告认为网络架构需要经过三个关键变化，以帮助数据中心网络更好地实行虚拟化和云计算。



   协议增强：首先，企业必须寻找新的协议，如TRILL （多链接透明互联）来取代STP（生成树协议）。TRILL 的广泛使用将能实现第2层多路径，提高带宽的可用性。



   重新设计架构：现有的数据中心大部分都是基于三层体系架构，涵盖了接入、汇聚及核心层。这种架构在虚拟环境中的运行效率低下，无法优化服务器到服务器和服务器到存储所产生的流量。网络用量不断流过不同层次，这更造成了延迟，也影响了实时应用的性能。近年来，交换机的性能已显著改善，这包括了通过迁移到第二层体系结构，来消除汇聚层。此外，消除多层次也能减少数据中心网络所需的交换机和电缆的数量，从而降低运营成本以及资本消耗。



   采用开放式架构：随着数据中心网络的异质性上升，客户应依据其行业标准，选择采用开放式的解决方案。这项投资在未来将能证明其正确性。



   网络优化通过使用以太网架构，确保网络以最高的效率运行。它创建了一个更弹性、更灵活的网络基础设施，该设施可提供无缝的可扩展性以支持动态业务需求，并允许管理员维持商定的服务水平协议（SLA）。

 



**自动化：**

 

   企业必须将工作负载自动化，才能真正实现云技术的承诺–即业务敏捷性和按需重新配置资源。自动化可将大量繁复及耗时的手工流程转换到无缝的工作流程，从而减少重复过程。下面的图表概述了云自动化的各个阶段：

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIXmeBADkJ0icPXj7lFia25HoJ0EK66JLiboMlLPkO51HKyPibxNnC8I8pWy6uzdNEGoEUyHeljDURHsHA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



   网络自动化是整个云自动化的重要组成部分。它必须支持按需重新配置资源和工作负载自动化。在选择网络自动化基础设施时，应考虑的关键因素包括：虚拟机感知零接触式虚拟化支持、最低配置的网络基础设施、执行自动化策略、预先定义的配置模板和服务配置。

 



**管理：**

 

   最重要的一点，云服务供应商和企业内部的IT团队必须维持私有云的高可用性和服务水平。由于核心基础设施资源（计算、存储和网络功能）的虚拟化性质有不稳定的状态，这导致私有云的监控系统相当复杂。



   另外重要的一点是，在业务运营被影响之前，通过积极主动的监控和预警管理来减少潜在的性能瓶颈。早期预警系统可以加快故障排除，并允许企业进一步改善和微调监控系统。尽管监控是管理方面很重要的一点，客户在考虑实现网络进化过程中，也应考虑系统是否有能力隔离、分析和报告流量模式以简化网络运营。























## VMware的二种数据存储形式：VMFS和NFS

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-07-20*

虚拟化为IT人员面临的诸多问题提供了解决方案。利用虚拟化技术，用户可以在一台计算机上以虚拟机的形式整合并运行多个工作负载。虚拟机是一台由软件创建的计算机，它可以像物理计算机一样运行操作系统和应用。每个虚拟机都包含自己的虚拟硬件，包括虚拟CPU、内存、硬盘和网卡，对于操作系统和应用而言，它们就像是物理硬件一样。



本文将介绍VMware虚拟机的几种数据存储形式：VMFS和NFS。

 

数据存储是一种逻辑容器，它可将各种存储设备的特征隐藏起来，提供一个统一的模型来存储虚拟机文件。在VMware中，用户可以使用VMFS或者使用存储设备带的基于NFS协议共享的文件系统对数据存储进行格式化，具体取决于所使用的存储类型。



![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIWQqxloHiakmcYP7y11xgicfSQyhJibyBs2NB14utFudbjMTmHW9lYrWENUMqnOFibR6nOt3lwKzOBW0g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



 

VMware vSphere环境中的ESXi主机支持以下存储技术：

 

- 直连存储：直接连接到主机的内部/外部存储磁盘或阵列。
- 光纤通道：一种使用SAN的高速传输协议。光纤通道中封装了SCSI命令，这些命令在光纤通道节点之间进行传输。通常，光纤通道节点可以是服务器、存储设备或者磁盘驱动器。光纤通道交换机可将多个节点互相连接起来，构成光纤通道网络。
- FCoE：光纤通道流量封装成基于以太网的光纤通道（FCoE）帧。这些FCoE帧将与网络流量聚合在一起。通过让同一条以太网链路同时承载光纤通道和以太网流量，FCoE能够提高物理基础架构的使用率。同时，FCoE还能减少网络端口和布线的总数。
- iSCSI：一种SCSI传输协议，该协议支持通过标准TCP/IP网络访问存储设备以及连接电缆。iSCSI可通过TCP/IP映射面向SCSI数据块的存储。通过诸如ESXi主机中的iSCSI主机总线适配器之类的启动器，可将SCSI命令发送到位于iSCSI存储系统中的目标上。
- NAS：基于标准的TCP/IP网络在文件系统级别共享的存储。NAS设备用于容纳NFS数据存储，但是NFS协议不支持SCSI命令。

 

 

iSCSI、NAS和FCoE可基于千兆位以太网或10GB以太网运行。10GB以太网可提供更高的存储性能水平和充足的带宽，因此多种类型的高带宽协议流量可以在同一网络上共存。数据存储可使用VMFS进行格式化，对于NAS/NFS设备，则可使用存储供应商自行提供的文件系统进行格式化。VMFS和NFS数据存储可以跨多个ESXi主机共享。虚拟机作为一组按目录组织的文件存储在数据存储中。数据存储可用于存储ISO映像、软盘映像、虚拟机和模板。

 

 

**VMFS**

 

VMFS是一种集群文件系统，该文件系统允许多个ESXi主机同时读写同一存储设备。集群文件系统支持一些基于虚拟化的独特服务，包括：

 

- 无需停机即可在不同的ESXi主机之间迁移正在运行的虚拟机
- 在单独的ESXi主机中自动重新启动故障虚拟机
- 支持跨多台物理服务器创建虚拟机群集

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIWQqxloHiakmcYP7y11xgicfS9AIuFDtwMkkibDN8gxnbgXwBtHK4UIw54xS9xvyqjlWiaFZ0XibNiarHVw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



 

VMFS允许IT部门在一个中心位置高效存储整个虚拟机的状态，从而极大地简化了虚拟机的调配。利用VMFS，多个ESXi主机可同时访问共享的虚拟机存储。当驻留在VMFS数据存储上的虚拟机开启并运行时，可动态增加VMFS数据存储的容量。VMFS数据存储能够有效地存储大型和小型的虚拟机文件。一个VMFS数据存储可支持多个虚拟磁盘文件。虚拟磁盘文件的最大大小为62TB。VMFS数据存储使用子数据块寻址来有效地对小型文件进行存储。



![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIWQqxloHiakmcYP7y11xgicfSZhtGVaW1blocSeNveL0b7tGJ7Bx5PfSd7Hqt4aQxeW1nvMj8Eibsc7A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



VMFS提供数据块级分布式锁定功能，可确保多台服务器不会同时启动同一虚拟机。如果一台ESXi主机出现故障，则会解除各虚拟机的磁盘锁定，从而这些虚拟机可以在其他ESXi主机上重新启动。

 

 

VMFS可部署在三种基于SCSI的存储设备上：



- 直连存储
- 光纤通道存储
- iSCSI存储

 

VMFS数据存储中存储的虚拟磁盘将始终作为已装载的SCSI设备显示在虚拟机中。虚拟磁盘对虚拟机操作系统隐藏了物理存储层。对于虚拟机内的操作系统而言，VMFS会保留内部文件系统的语义。因此，虚拟机内运行的操作系统看到的是本机文件系统，而非VMFS。这些语义可确保虚拟机中运行的应用具有正常的应用行为及数据完整性。

 

VMFS数据存储采用与Linux或UNIX操作系统相似的文件结构。每个数据存储都装载在文件夹中且包含多个子目录，这些子目录中含有用于描述虚拟机的文件。VMFS经过优化，可以支持大型文件，同时也可以支持多个小型的并发写入操作。



![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIWQqxloHiakmcYP7y11xgicfSoBdeRWdQnh7g1OGHuMEM8GT0woAu5NMXty6kxM12YiaU5bQMEGmP8xg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

 

**NFS**

 

NFS是ESXi主机用于与NAS设备进行通信的一种文件共享协议。NAS是一种与网络连接的专用存储设备，可为ESXi主机提供文件访问服务。NFS数据存储被视为VMFS数据存储类似的存储，因为它们都可用于存放虚拟机文件、模块和ISO映像。此外，NFS卷还允许对文件位于NFS数据存储中的虚拟机进行vMotion迁移。内置在ESXi中的NFS客户端采用NFS协议与NAS或NFS服务器进行通信。

 

ESXi主机不使用Network Lock Manager协议，该协议是用于支持NFS挂载文件的文件锁定功能的标准协议。通过在NFS服务器上创建锁定文件，可以执行NFS锁定。锁定文件名为.lck-<fileid>，其中<filed>是fileid字段的值。锁定文件创建后，系统会定期向锁定文件发送更新，以通知其他ESXi主机锁定仍处于活动状态。锁定文件更新会向NFS服务器生成极小的WRITE请求。



![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIWQqxloHiakmcYP7y11xgicfSHhQU22wBOHobAjQX4n7l03jyFtNTXZ2MVgjWqNVjhNEbdBOO5JVdKg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)























## 虚拟环境下存储管理的建议与最佳实践

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-07-17*

虚拟服务器环境和桌面虚拟化使得进行数据整合，能源节约以及物理系统精简易于实行。与此同时，服务器虚拟化给存储系统和维护系统的管理员带来了一些严峻的挑战：由于虚拟服务器、桌面相对存储设备的比例，虚拟机在竞争存储资源时会造成一些空间与性能问题。

 

本文讨论虚拟环境下存储面临的挑战并给出相应建议。



 

**虚拟环境下存储面临的挑战：**

 

虚拟环境下存储管理面临一些挑战，如：空间利用率，速度等。虚拟化的最大问题之一在于存储空间的利用。由于虚拟机扩展的简单化，很多用户部署多台虚拟机，但如果还是按照传统方式来配置存储环境，将造成相当多的容量耗费。这一问题的产生不是由于缺乏存储，而在于数据存储管理，从而导致时间，空间以及成本的浪费。因此，维持存储空间利用率是一个很大的挑战。

 

服务器虚拟化所带来的另一大挑战之一就是如何管理多个VM运行在一个物理主机上所产生的高水平I/O，而所有这些I/O都要通过运行在主机上的一个虚拟机管理器。由于新的VM很容易建立，因此存储容量的需求上升，同时由于VM在虚拟化架构中移动，因此会碰到更多的随机I/O，对性能以及存储系统容量的要求也会提高。



 

**虚拟环境下存储管理的建议：**

 

**认识存储工作负载**



如果在主机上部署虚拟机而不考虑磁盘I/O使用情况，可能会造成实时资源瓶颈。为了避免此问题，需根据应用和工作负载，对虚拟机将会产生的磁盘I/O数量有一个基本的认识。同样，高I/O虚拟机应当均匀分布于物理主机以及数据存储。如果在单一主机上部署过多高磁盘I/O的虚拟机，将可能会造成主机存储控制器过度使用。与此同时，过多高磁盘I/O虚拟机访问同一存储系统或LUN也可能会造成性能瓶颈。因此，即便在对虚拟机磁盘I/O工作负载非常清楚的情况下，依然应当使用性能监控工具对环境进行深入观察，如平均及峰值使用情况。永远不要假设应用或工作负载永远一尘不变，随着补丁包，用户增加以及总体环境的改变，某一工作量在不同的时间可能会要求更多的存储。同时，需记住虚拟机并不总是位于同一主机上。虚拟机是移动的并且可能会移至另一物理主机之上。

 

VMware DRS能够在vSphere集群中的不同主机之间自动平衡CPU和内存资源。使用Storage DRS特性，VMware虚拟环境还能够在数据存储集群中的数据存储之间平衡磁盘容量与性能。此外，DRS会监控单个数据存储的I/O延迟，进行分析并初始化Storage vMotion操作以确保所有数据存储的I/O延迟是最小的。这个特性也减少了部署虚拟机带来的管理开销，想要部署新虚拟机的时候无需自行进行I/O计算，可以让存储DRS帮助做出决定。Storage DRS每8小时对I/O负载进行评估，当发现性能的不平衡持续几个小时之后将会给出迁移建议。这避免了由于短期磁盘访问高峰而引发的不必要的迁移。同时，在使用VMware DRS的情况下，建议使用DRS非关联规则，以确保将虚拟机存放到不同的数据存储上。

 

**避免密集磁盘I/O**



某些场景下，虚拟机可能会周期性产生一些非常密集的I/O，这可能会导致严重的资源争用，从而拉低所有虚拟机的运行速度。对于虚拟桌面可能是由于特定时间事件引起的，比如所有用户在早上近乎同一时间打开电脑，也就是通常所说的启动风暴。尽管此类情况可能无法避免，但仍然有办法加以控制：如为存储设备添加缓存控制器，或是在高磁盘I/O周期使用自动存储分层技术，以利用快速存储设备如SSD。

 

其他一些场景是可控的，如：虚拟机备份窗口以及虚拟机调度活动如病毒扫描、补丁。多台运行并发备份的虚拟机位于同一主机或数据存储会带来高磁盘I/O，将会影响主机或数据存储之上的其他虚拟机性能。应当均匀地安排备份，而不要在同一主机或存储上同时并发地运行过多备份。同时可以考虑那些通过直接访问VM数据存储来备份VM磁盘而避免占用主机资源的备份应用。一些磁盘到磁盘的虚拟化备份产品能够缩短备份窗口，并且让备份延迟进行而不影响主机和虚拟机。对于补丁以及病毒扫描这类预定操作，可让其随机进行或错开安排，拉长时间跨度以使操作不会并发执行。磁盘碎片重组时也应当特别小心，重组所产生的高I/O可能导致容量需求的快速增长。

 

如果你不知道哪些是密集型应用，运行于哪个虚拟机，服务器集群，存储，那么就很难真正理解存储性能。这些应用是读密集型还是写密集型？知道这些问题的答案对性能调优会有很大帮助。可以通过VMware esxtop CLI，vCenter性能图表或其他第三方工具来进行IOPS分析，查看是读密集型还是写密集型。

 

**空间的高效利用**



虚拟机容易耗尽磁盘空间，但能够采取一些措施在存储设备上对所占空间进行控制。总体而言，考虑空间利用率时，用户需要对性能，可靠性与冗余度做一个梯度衡量；避免不再有用或不被使用但仍然消耗存储资源的虚拟机，并将所占用的存储资源放回空闲池。

 

从技术的角度来说：

对于虚拟桌面或实验室类型服务器环境，使用linked clone能够节省相当一部分磁盘空间。linked clone类似于VM快照：虚拟机的虚拟磁盘文件为只读，同时创建一个容量较小的delta磁盘供写入操作。linked clone工作原理是创建一个主虚拟磁盘镜像被多虚拟机读取，但是所有写入发生在各虚拟机自己的delta磁盘。例如，你创建了100个虚拟机，配置了40GB虚拟磁盘，如果没有linked clone那么可能会消耗4TB磁盘空间。然而，在使用linked clone的情况下，你会有一个40GB虚拟磁盘供所有虚拟机读取，一个较小的1G或2G的虚拟磁盘来写入——从而节省了大量空间。



虚拟化最有用的功能之一是对虚拟机进行快照。对虚拟机内存以及虚拟磁盘的实时快照在应用或操作系统升级报错或测试更改配置时非常有用。虚拟化备份及复制应用也常用快照来获取虚拟磁盘变更而无需宕机。但是，快照的过度使用不仅会占用磁盘空间，而且还会影响备份性能，VMotion以及其他存储相关功能。快照应该是暂时的，用过之后应当删除。



虚拟服务器环境下，精简资源配置thin provisioning能够帮助管理存储空间。这一技术可以在虚拟层或存储层实施。通常几乎所有虚拟机都会被分配比实际需要多的磁盘空间，thin provisioning通过让虚拟磁盘文件只占用它们实际使用的而不是被分配的全部空间来节约存储资源。使用thin provisioning能够显著减少虚拟机消耗的磁盘空间并且让存储容量升级更加可控。同时，thin provisioning，数据消重，条带等技术能够让用户使用便宜的磁盘而不是高性能存储资源来满足虚拟服务器的要求，从而控制成本。

 

**避免不必要的I/O**



应当保持限制虚拟服务器和虚拟桌面产生的磁盘I/O数量。包括禁用不需要的Windows服务，卸载不需要的应用，禁用文件索引，限制操作系统和应用的登录数量。可应用终端管理工具或Active Directory组策略来帮助管理并控制配置。不仅需要减少虚拟机磁盘I/O，同时也要减少对其他主机资源的消耗。减少虚拟机产生的不必要的磁盘I/O对于提高存储利用率是一个很有效的措施。

 

**为工作负载选择正确的存储**



大多数主机除了连接至共享存储之外，还有本地可用存储分配给虚拟机。主机存储类型的不同会产生不同的性能特性，如8Gb FC SAN以及1Gb iSCSI或NFS存储设备。除了不同的存储协议以外，还有不同转速的硬盘（10K rpm, 15K rpm）以及接口(SAS, SATA, SSD)。因此，需要为虚拟机选择类型合适的存储。在较慢的存储分层上部署相对不重要的虚拟机，在快速存储上部署高I/O需求的关键虚拟机。可以选择如EMC FAST自动化存储分层技术，按照数据的不同需求自动在存储层级之间移动。

 

进一步，可以将虚拟机拆分至多个磁盘空间，虚拟机的虚拟磁盘文件按照性能需求放置于多个存储层级之上。一个通常的方法是为操作系统，Windows页面，应用和数据分别创建磁盘分区。较快的存储分层用于高I/O请求数据，较慢的分层或本地存储用于其他剩余的数据。即使不这样做，也还是可以在主机物理内存耗尽时为大型虚拟机虚拟交换文件指定慢速或本地存储。这也帮助限制虚拟机使用昂贵存储层级的磁盘空间。















## VMware vCloud Hybrid Service混合云解决方案

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-07-21*

   借助VMware vCloud Hybrid Service（由VMware拥有并运营的安全专用IaaS“基础架构即服务”云）运行任何现有或新工作负载。 该服务构建在VMware vSphere这一值得信赖的基础之上，可提供跨现有数据中心和新数据中心容量的统一网络连接、通用管理和安全保护，同时可实现与内部数据中心相同的所需可靠性和性能。本文将介绍VMware这一混合云解决方案。

 

**将数据中心扩展到云:**

 

   因为业务部门需要对其内部和外部客户以及竞争对手更快地作出反应，所以选择将应用迁移到云的敏捷性和经济高效性越来越有吸引力。 在混合云中，本地和异地IT 环境并不只是与通用管理连接和集成。它们还能够以完全相同的方式运行现有应用和新应用。借助混合云，业务部门可以利用内部和外部的通用管理、编排、网络连接和安全模型。因此，企业无需变更应用或运营即可获得公有云的优势。

   借助VMware和VMware vCloud服务提供商合作伙伴的“基础架构即服务”混合云，用户可以根据特定应用的安全性、性能和可用性需要将应用部署到最佳位置，还可以在内部环境和外部环境之间无缝迁移应用。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIWQqxloHiakmcYP7y11xgicfSKW0kK8DyNicIsVkB4HZ8KrhAVkwic4m4UQrEyV70bfic4BP7nib93CGRmw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

**混合云的优势：**

 

   在选择 VMware 或 VMware vCloud 服务提供商合作伙伴的云计算服务时，用户不必担心通常与其他云计算服务相关的应用兼容性或服务提供商限制。 这有助于降低风险和成本，而无需任何其他管理工具和基础架构，也无需彻底改造流程或重新培训现有员工。



- 以用户目前采用的方式在云中编写、部署和管理应用，依靠底层平台来提供与您的当前 VMware 基础架构相同级别的安全性、可靠性和性能。
- 通过“单一窗口”管理框架来管理包括数据中心和公有云在内的整个混合云基础架构。使用已经拥有的工具、流程和技能。
- 无缝互操作性可让您自由地快速将工作负载部署到云，同时可随着您要求的变化灵活地在内部环境和外部环境之间来回迁移它们。

 

**VMware vCloud混合云服务：**

 

   VMware vCloud Hybrid Service是一个由VMware运营、构建于VMware vSphere可信基础之上的基础架构即服务（IaaS）云，为客户提供了将其数据中心无缝延伸至云的通用平台。这一平台支持现有的所有的工作负载类型，以及第三方应用。它提供通用的管理和安全接口，以及与企业内部VMware架构相同的可靠性和性能。采用VMware vCloud混合云服务，无论是本地还是远端的IT环境，用户都只需一个服务号码就能一站式解决各种问题。



   vCloud混合云服务基于vSphere，因此用户可以将应用迁移其上而无需任何改动。同时它基于虚拟化网络，可以快速地被定制化以支持用户的应用和安全需要。你可以将内部数据中心的2层或3层网络伸展至vCloud混合云，而不需要任何手动地配置更改。vCloud混合云服务包含自动远程复制、监控等高可用性服务，而这些都不需要额外的付费。



   VMware vCloud混合云服务目前提供两种订购模式：第一种Dedicated Cloud （独有云），它将提供物理隔离保存的计算资源，适合生产环境和关键业务。第二个选择是Virtual Private Cloud （虚拟私有云）的多租户模式，适合短期项目、开发和测试系统以及低要求的项目。

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIWQqxloHiakmcYP7y11xgicfSzVFgSbxI3JzC1QT4PMmicQErFia90o8ng9vk9jZBcXAyZc7OiczBmfppA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

**vCloud混合云服务使用案例：**

 

   早期的云计算实践者已经证明了在云环境中部署开发和测试系统的便利性。它简单、快速、低成本并且可以在有限的时间内获得按需容量。随着技术的进步和观念的转变，越来越多的应用也变得适于在混合云中部署：

- 包装好的主机服务（邮件、协作软件、数据分析、商业智能等）
- 网站托管或电子商务
- 备份、存档或在线存储
- 按需或外包的IT数据中心
- 测试、开发系统



















## VMware Virtual Volume (VVol)虚拟卷技术初探

原创 EMC中文技术社区 [戴尔易安信技术支持](javascript:void(0);) *2016-07-25*

什么是Virtual Volume？它与vSphere上的VMDK和虚拟机有什么联系？本文将为大家一探究竟。

 

**虚拟卷的作用:**

 

   VMware Virtual Volume虚拟卷功能提供了一种的新的范例，可以让单个虚拟机和它的磁盘（而不是LUN）成为存储系统的管理单元。Virtual Volume将虚拟磁盘和其他的虚拟机文件封装起来，原生地储存在存储系统上。通过使用专门的API接口（vSphere APIs for Storage Awareness，VASA），存储系统可以感知到虚拟机和它们相关的内容。通过VASA，vSphere和下层存储系统可以建立起双向的带外（out-of-band）通信，使得数据服务和一些虚拟机操作可以卸载到存储上，比如快照、克隆等。



   对于支持Virtual Volume的存储系统的带内（in-band）通信，vSphere仍然使用标准的SCSI和NFS协议。这就使得对Virtual Volume的支持可以在任意类型的存储上实现，如iSCSI、Fibre Channel、FCoE和NFS。

 

**虚拟卷的主要概念:**

 

   **Vendor Provider (VP)**：由存储厂商提供的插件。它可以使用一系列带外管理API，VASA等。VP可以通过VASA API将存储阵列的功能呈现给vSphere。

   **Storage Container (SC)**：SC某种意义上和datastore相同，但它更注重于物理存储上的数据块（chunk）分配。SC基于将符合特定应用SLA的VMDK组合后通过VASA API“翻译”至符合要求的存储设备上。

   **Protocol Endpoint (PE)**：PE是主机到存储系统的接入点，由存储管理员创建。其上所有的路径和策略通过PE管理。PE兼容iSCSI和NFS。它的目的是替代LUN和挂载点（mount point）。

   ![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVrHiaZvt93tBDfUsSEgLf2XMWpHrbjeH5qD2m4oUpbNled7ZB3xXjLJnlVGWBjzbqPQiaCHeSrBNxw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

**虚拟卷的优势：**

 

   Virtual Volume的主要优势包括：

- 当数据服务在应用层级上启用时实现操作转换

   ![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVrHiaZvt93tBDfUsSEgLf2XKLFtXBmX4hPStyvpqGjOpXAiaqEGaPddiaoOicReibLyx5Tqwm7GzMsicNQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

- 更精细颗粒度的资源分配提升了存储利用率

​        ![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVrHiaZvt93tBDfUsSEgLf2XFLYGczcUw14kDaTmgXPFwjWzrRq2FOcp16acicKlm0pGc6o7MEfClOA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

- 使用基于策略管理（Policy Based Management）的通用管理

  创建VM存储策略示例：

​        ![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIVrHiaZvt93tBDfUsSEgLf2X5HGVGIGSr5rdG3hpkzTG6S58VpF2TUGia6HdsVZMJkyDhcSyl0w3zAw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)



















## 什么是IaaS, PaaS和SaaS及其区别

[戴尔易安信技术支持](javascript:void(0);) *2016-07-16*

 云服务”现在已经快成了一个家喻户晓的词了。如果你不知道PaaS, IaaS 和SaaS的区别，那么也没啥，因为很多人确实不知道。

“云”其实是互联网的一个隐喻，“云计算”其实就是使用互联网来接入存储或者运行在远程服务器端的应用，数据，或者服务。

 

任何一个使用基于互联网的方法来计算，存储和开发的公司，都可以从技术上叫做从事云的公司。然而，不是所有的云公司都一样。不是所有人都是CTO，所以有时候看到云技术背后的一些词可能会比较头疼。

 

 

**云也是分层的**

 

任何一个在互联网上提供其服务的公司都可以叫做云计算公司。其实云计算分几层的，分别是Infrastructure（基础设施）-as-a- Service，Platform（平台）-as-a-Service，Software（软件）-as-a-Service。基础设施在最下端，平台在 中间，软件在顶端。别的一些“软”的层可以在这些层上面添加。

 

![图片](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIW97BCDX89ibqcicnIztIqSEzUdWe7EZicdJAHAlVbk9wicZujt3ic9iakKiaOfmSlibNozUsFKQxSCeXLCjA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

 

 

**IaaS: Infrastructure-as-a-Service（基础设施即服务）**

 

第一层叫做IaaS，有时候也叫做Hardware-as-a-Service，几年前如果你想在办公室或者公司的网站上运行一些企业应用，你需要去买服务器，或者别的高昂的硬件来控制本地应用，让你的业务运行起来。

 

但是现在有IaaS，你可以将硬件外包到别的地方去。IaaS公司会提供场外服务器，存储和网络硬件，你可以租用。节省了维护成本和办公场地，公司可以在任何时候利用这些硬件来运行其应用。

 

一些大的IaaS公司包括Amazon, Microsoft, VMWare, Rackspace和Red Hat.不过这些公司又都有自己的专长，比如Amazon和微软给你提供的不只是IaaS，他们还会将其计算能力出租给你来host你的网站。

 

 

**PaaS: Platform-as-a-Service（平台即服务）**

 

第二层就是所谓的PaaS，某些时候也叫做中间件。你公司所有的开发都可以在这一层进行，节省了时间和资源。

 

PaaS公司在网上提供各种开发和分发应用的解决方案，比如虚拟服务器和操作系统。这节省了你在硬件上的费用，也让分散的工作室之间的合作变得更加容易。网页应用管理，应用设计，应用虚拟主机，存储，安全以及应用开发协作工具等。

 

一些大的PaaS提供者有Google App Engine,Microsoft Azure，Force.com,Heroku，Engine Yard。最近兴起的公司有AppFog, Mendix 和 Standing Cloud

 

 

**SaaS: Software-as-a-Service（软件即服务）**

 

第三层也就是所谓SaaS。这一层是和你的生活每天接触的一层，大多是通过网页浏览器来接入。任何一个远程服务器上的应用都可以通过网络来运行，就是SaaS了。

 

你消费的服务完全是从网页如Netflix, MOG, Google Apps, Box.net, Dropbox或者苹果的iCloud那里进入这些分类。尽管这些网页服务是用作商务和娱乐或者两者都有，但这也算是云技术的一部分。

 

一些用作商务的SaaS应用包括Citrix的GoToMeeting，Cisco的WebEx，Salesforce的CRM，ADP，Workday和SuccessFactors。



原文链接：http://www.u1city.net/Article-538.html





















